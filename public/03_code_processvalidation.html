<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸ˆìœµê¶Œ í”„ë¡œì„¸ìŠ¤ ê²€ì¦ ëˆ„ë½ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .code-font { font-family: 'Courier New', monospace; }
        .process-step { transition: all 0.3s; }
        .process-step.active { background: #3b82f6; color: white; }
        .process-step.completed { background: #10b981; color: white; }
        .process-step.bypassed { background: #ef4444; color: white; }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <!-- í‰ê°€ê¸°ì¤€ ë°°ë„ˆ -->
    <div class="max-w-7xl mx-auto mb-4">
        <div class="bg-red-600 text-white p-4 rounded-lg shadow-lg">
            <div class="flex items-center gap-3">
                <i class="fas fa-clipboard-check text-2xl"></i>
                <div>
                    <h1 class="font-bold text-lg">ì „ìê¸ˆìœµê¸°ë°˜ì‹œì„¤ ë³´ì•ˆ ì·¨ì•½ì  í‰ê°€ê¸°ì¤€ - WEB-SER-043</h1>
                    <p class="text-sm">í”„ë¡œì„¸ìŠ¤ ê²€ì¦ ëˆ„ë½ (PV) | ìœ„í—˜ë„: 4 (ë†’ìŒ) | í†µì œêµ¬ë¶„: 5.4.2 ê±°ë˜ ë¬´ê²°ì„±</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
            
            <!-- ì¢Œì¸¡: ì·¨ì•½í•œ ì‹œìŠ¤í…œ -->
            <div class="space-y-4">
                
                <!-- ì€í–‰ í—¤ë” -->
                <div class="bg-blue-600 text-white p-4 rounded-lg shadow-lg">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-building-columns text-2xl"></i>
                        <div>
                            <h2 class="text-xl font-bold">XXì€í–‰</h2>
                            <p class="text-sm">ì¸í„°ë„·ë±…í‚¹ ê³„ì¢Œì´ì²´ ì‹œìŠ¤í…œ</p>
                        </div>
                    </div>
                    <div class="mt-2 bg-red-500 px-3 py-1 rounded text-sm">
                        <i class="fas fa-exclamation-triangle"></i> ì·¨ì•½ì : ë‹¨ê³„ë³„ ê²€ì¦ ëˆ„ë½
                    </div>
                </div>

                <!-- ì •ìƒ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° -->
                <div class="bg-white p-5 rounded-lg shadow-lg">
                    <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                        <i class="fas fa-route text-blue-600"></i>
                        ì •ìƒ ì´ì²´ í”„ë¡œì„¸ìŠ¤
                    </h3>
                    
                    <div class="space-y-2">
                        <div id="step1Box" class="process-step bg-gray-200 p-3 rounded">
                            <div class="flex items-center gap-2">
                                <span class="bg-white text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">1</span>
                                <span class="font-bold">ì´ì²´ ì •ë³´ ì…ë ¥</span>
                            </div>
                            <p class="text-xs mt-1 ml-8">ë°›ëŠ” ê³„ì¢Œ, ê¸ˆì•¡, ë‚´ìš© ì…ë ¥</p>
                        </div>
                        
                        <div id="step2Box" class="process-step bg-gray-200 p-3 rounded">
                            <div class="flex items-center gap-2">
                                <span class="bg-white text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">2</span>
                                <span class="font-bold">ì´ì²´ ì •ë³´ í™•ì¸</span>
                            </div>
                            <p class="text-xs mt-1 ml-8">ì…ë ¥ ë‚´ìš© ê²€í†  ë° í™•ì¸</p>
                        </div>
                        
                        <div id="step3Box" class="process-step bg-gray-200 p-3 rounded">
                            <div class="flex items-center gap-2">
                                <span class="bg-white text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">3</span>
                                <span class="font-bold">OTP ì¸ì¦</span>
                            </div>
                            <p class="text-xs mt-1 ml-8">ë³´ì•ˆì¹´ë“œ ë˜ëŠ” OTP ë²ˆí˜¸ ì…ë ¥</p>
                        </div>
                        
                        <div id="step4Box" class="process-step bg-gray-200 p-3 rounded">
                            <div class="flex items-center gap-2">
                                <span class="bg-white text-gray-700 w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold">4</span>
                                <span class="font-bold">ì´ì²´ ì‹¤í–‰</span>
                            </div>
                            <p class="text-xs mt-1 ml-8">ìµœì¢… ì´ì²´ ì²˜ë¦¬</p>
                        </div>
                    </div>

                    <div class="mt-4 flex gap-2">
                        <button onclick="normalProcess()" 
                                class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm">
                            <i class="fas fa-play"></i> ì •ìƒ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
                        </button>
                        <button onclick="resetProcess()" 
                                class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm">
                            <i class="fas fa-redo"></i> ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>

                <!-- ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ ë²„íŠ¼ -->
                <div class="bg-gray-800 text-white p-4 rounded-lg shadow-lg">
                    <h3 class="font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-flask text-red-400"></i>
                        ê³µê²© ì‹œë‚˜ë¦¬ì˜¤
                    </h3>
                    <div class="space-y-2">
                        <button onclick="attackScenario(1)" 
                                class="w-full text-left bg-red-900 hover:bg-red-800 px-3 py-2 rounded text-sm">
                            <i class="fas fa-forward"></i> ì‹œë‚˜ë¦¬ì˜¤ 1: Step 2,3 ê±´ë„ˆë›°ê¸°
                        </button>
                        <button onclick="attackScenario(2)" 
                                class="w-full text-left bg-orange-900 hover:bg-orange-800 px-3 py-2 rounded text-sm">
                            <i class="fas fa-code"></i> ì‹œë‚˜ë¦¬ì˜¤ 2: API ì§ì ‘ í˜¸ì¶œ
                        </button>
                        <button onclick="attackScenario(3)" 
                                class="w-full text-left bg-purple-900 hover:bg-purple-800 px-3 py-2 rounded text-sm">
                            <i class="fas fa-arrows-spin"></i> ì‹œë‚˜ë¦¬ì˜¤ 3: í† í° ì¬ì‚¬ìš©
                        </button>
                        <button onclick="attackScenario(4)" 
                                class="w-full text-left bg-yellow-900 hover:bg-yellow-800 px-3 py-2 rounded text-sm">
                            <i class="fas fa-unlock"></i> ì‹œë‚˜ë¦¬ì˜¤ 4: OTP ì—†ì´ ì´ì²´
                        </button>
                    </div>
                </div>

                <!-- ì·¨ì•½í•œ ì½”ë“œ -->
                <div class="bg-gray-900 text-white p-4 rounded-lg shadow-lg">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-bold text-red-400">
                            <i class="fas fa-skull-crossbones"></i> ì·¨ì•½í•œ Java ì½”ë“œ
                        </h3>
                        <span class="text-xs bg-red-600 px-2 py-1 rounded">ìœ„í—˜</span>
                    </div>
                    <pre class="code-font text-xs overflow-x-auto"><code><span class="text-gray-500">// âŒ í”„ë¡œì„¸ìŠ¤ ê²€ì¦ ëˆ„ë½</span>
@PostMapping("/transfer/execute")
public String executeTransfer(
    @RequestParam String toAccount,
    @RequestParam int amount) {
    
    <span class="text-red-400">// ì´ì „ ë‹¨ê³„ ì™„ë£Œ ì—¬ë¶€ í™•ì¸ ì•ˆ í•¨!</span>
    <span class="text-red-400">// OTP ê²€ì¦ ì•ˆ í•¨!</span>
    <span class="text-red-400">// ì„¸ì…˜ í† í° ê²€ì¦ ì•ˆ í•¨!</span>
    
    Transfer transfer = new Transfer();
    transfer.setToAccount(toAccount);
    transfer.setAmount(amount);
    
    <span class="text-red-400">// ë°”ë¡œ ì´ì²´ ì‹¤í–‰</span>
    transferService.execute(transfer);
    
    return "success";
}</code></pre>
                </div>

            </div>

            <!-- ìš°ì¸¡: ê²°ê³¼ ë° ì•ˆì „í•œ ì½”ë“œ -->
            <div class="space-y-4">
                
                <!-- ê³µê²© ì‹¤í–‰ ê²°ê³¼ -->
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-800 text-white px-4 py-3 flex justify-between items-center">
                        <h3 class="font-bold">
                            <i class="fas fa-terminal"></i> ê³µê²© ì‹¤í–‰ ê²°ê³¼
                        </h3>
                        <span id="statusBadge" class="text-xs bg-green-500 text-gray-900 px-3 py-1 rounded">
                            ëŒ€ê¸°ì¤‘
                        </span>
                    </div>
                    <div id="attackResult" class="p-5 min-h-[300px] bg-white">
                        <div class="text-center text-gray-400 py-10">
                            <i class="fas fa-shield-halved text-5xl mb-3 opacity-30"></i>
                            <p class="text-sm">ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
                        </div>
                    </div>
                </div>

                <!-- ê³µê²© ë‹¨ê³„ -->
                <div id="attackStages" class="hidden bg-red-100 border-l-4 border-red-600 p-4 rounded-lg">
                    <h4 class="font-bold text-red-700 mb-2 flex items-center gap-2">
                        <i class="fas fa-list-ol"></i> ê³µê²© ì§„í–‰ ë‹¨ê³„
                    </h4>
                    <div id="stagesContent" class="text-sm text-red-700 space-y-1"></div>
                </div>

                <!-- í„°ë¯¸ë„ ì¶œë ¥ -->
                <div id="terminalBox" class="hidden bg-black text-green-400 p-4 rounded-lg shadow-lg">
                    <div class="font-bold mb-2 text-xs">
                        <i class="fas fa-terminal"></i> ATTACKER CONSOLE
                    </div>
                    <div id="terminalLines" class="code-font text-xs space-y-1 max-h-[200px] overflow-y-auto"></div>
                </div>

                <!-- ì•ˆì „í•œ ì½”ë“œ -->
                <div class="bg-gray-900 text-white p-4 rounded-lg shadow-lg">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-bold text-green-400">
                            <i class="fas fa-shield-halved"></i> ì•ˆì „í•œ Java ì½”ë“œ
                        </h3>
                        <span class="text-xs bg-green-600 px-2 py-1 rounded">ê¶Œì¥</span>
                    </div>
                    <pre class="code-font text-xs overflow-x-auto max-h-[350px]"><code><span class="text-green-400">// âœ… í”„ë¡œì„¸ìŠ¤ ê²€ì¦ êµ¬í˜„</span>

<span class="text-gray-500">// 1ë‹¨ê³„: ì´ì²´ ì •ë³´ ì…ë ¥</span>
@PostMapping("/transfer/step1")
public String inputTransfer(Transfer transfer, 
                           HttpSession session) {
    
    <span class="text-green-400">// í”„ë¡œì„¸ìŠ¤ í† í° ìƒì„±</span>
    String processToken = UUID.randomUUID().toString();
    session.setAttribute("processToken", processToken);
    session.setAttribute("step1Data", transfer);
    session.setAttribute("currentStep", 1);
    
    return "redirect:/transfer/step2";
}

<span class="text-gray-500">// 2ë‹¨ê³„: ì´ì²´ ì •ë³´ í™•ì¸</span>
@PostMapping("/transfer/step2")
public String confirmTransfer(HttpSession session) {
    
    <span class="text-green-400">// Step 1 ì™„ë£Œ ì—¬ë¶€ ê²€ì¦</span>
    if (session.getAttribute("currentStep") == null ||
        (int)session.getAttribute("currentStep") != 1) {
        throw new InvalidProcessException();
    }
    
    <span class="text-green-400">// OTP í† í° ìƒì„± ë° SMS ë°œì†¡</span>
    String otpToken = generateOTP();
    session.setAttribute("otpToken", otpToken);
    session.setAttribute("otpExpiry", 
        System.currentTimeMillis() + 180000); // 3ë¶„
    
    sendSMS(otpToken);
    session.setAttribute("currentStep", 2);
    
    return "redirect:/transfer/step3";
}

<span class="text-gray-500">// 3ë‹¨ê³„: OTP ì¸ì¦</span>
@PostMapping("/transfer/step3")
public String verifyOTP(String inputOTP, 
                       HttpSession session) {
    
    <span class="text-green-400">// Step 2 ì™„ë£Œ ì—¬ë¶€ ê²€ì¦</span>
    if ((int)session.getAttribute("currentStep") != 2) {
        throw new InvalidProcessException();
    }
    
    <span class="text-green-400">// OTP ê²€ì¦</span>
    String savedOTP = (String)session.getAttribute("otpToken");
    long expiry = (long)session.getAttribute("otpExpiry");
    
    if (System.currentTimeMillis() > expiry) {
        throw new OTPExpiredException();
    }
    
    if (!inputOTP.equals(savedOTP)) {
        throw new InvalidOTPException();
    }
    
    <span class="text-green-400">// ìµœì¢… ì‹¤í–‰ í† í° ìƒì„± (ì¼íšŒìš©)</span>
    String executeToken = UUID.randomUUID().toString();
    session.setAttribute("executeToken", executeToken);
    session.setAttribute("currentStep", 3);
    
    return "redirect:/transfer/execute";
}

<span class="text-gray-500">// 4ë‹¨ê³„: ì´ì²´ ì‹¤í–‰</span>
@PostMapping("/transfer/execute")
public String executeTransfer(String executeToken,
                             HttpSession session) {
    
    <span class="text-green-400">// Step 3 ì™„ë£Œ ì—¬ë¶€ ê²€ì¦</span>
    if ((int)session.getAttribute("currentStep") != 3) {
        throw new InvalidProcessException();
    }
    
    <span class="text-green-400">// ì‹¤í–‰ í† í° ê²€ì¦ (ì¼íšŒìš©)</span>
    String savedToken = (String)session.getAttribute("executeToken");
    if (!executeToken.equals(savedToken)) {
        throw new InvalidTokenException();
    }
    
    <span class="text-green-400">// í† í° ì¦‰ì‹œ ì‚­ì œ (ì¬ì‚¬ìš© ë°©ì§€)</span>
    session.removeAttribute("executeToken");
    
    <span class="text-green-400">// í”„ë¡œì„¸ìŠ¤ í† í° ê²€ì¦</span>
    String processToken = (String)session.getAttribute("processToken");
    if (processToken == null) {
        throw new InvalidProcessException();
    }
    
    <span class="text-green-400">// ì´ì²´ ì‹¤í–‰</span>
    Transfer transfer = (Transfer)session.getAttribute("step1Data");
    transferService.execute(transfer);
    
    <span class="text-green-400">// ëª¨ë“  ì„¸ì…˜ ë°ì´í„° ì‚­ì œ</span>
    session.removeAttribute("processToken");
    session.removeAttribute("step1Data");
    session.removeAttribute("currentStep");
    
    return "success";
}</code></pre>
                </div>

                <!-- ë°©ì–´ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                <div class="bg-white p-4 rounded-lg shadow-lg">
                    <h3 class="font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-list-check text-red-600"></i>
                        í”„ë¡œì„¸ìŠ¤ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸
                    </h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check text-green-500 mt-1"></i>
                            <div><strong>ë‹¨ê³„ë³„ í† í°:</strong> ê° ë‹¨ê³„ë§ˆë‹¤ ê³ ìœ  í† í° ìƒì„±</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check text-green-500 mt-1"></i>
                            <div><strong>ì´ì „ ë‹¨ê³„ ê²€ì¦:</strong> currentStep í™•ì¸</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check text-green-500 mt-1"></i>
                            <div><strong>í† í° ì¼íšŒìš©:</strong> ì‚¬ìš© í›„ ì¦‰ì‹œ ì‚­ì œ</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check text-green-500 mt-1"></i>
                            <div><strong>ì‹œê°„ ì œí•œ:</strong> OTP 3ë¶„ ìœ íš¨ê¸°ê°„</div>
                        </div>
                        <div class="flex items-start gap-2">
                            <i class="fas fa-check text-green-500 mt-1"></i>
                            <div><strong>ì„¸ì…˜ ì •ë¦¬:</strong> ì™„ë£Œ í›„ ëª¨ë“  ë°ì´í„° ì‚­ì œ</div>
                        </div>
                    </div>
                </div>

                <!-- í‰ê°€ íŒì • -->
                <div id="judgementBox" class="hidden bg-gray-900 text-white p-4 rounded-lg">
                    <h3 class="font-bold text-indigo-400 mb-2 text-sm">
                        <i class="fas fa-gavel"></i> í‰ê°€ íŒì •
                    </h3>
                    <div class="text-xs space-y-1">
                        <div><strong>í‰ê°€í•­ëª©:</strong> WEB-SER-043 í”„ë¡œì„¸ìŠ¤ ê²€ì¦ ëˆ„ë½</div>
                        <div><strong>íŒì •:</strong> <span id="judgement" class="text-red-400">ì·¨ì•½</span></div>
                        <div><strong>ê·¼ê±°:</strong> <span id="evidence"></span></div>
                    </div>
                </div>

                <!-- í”¼í•´ ì‹œë‚˜ë¦¬ì˜¤ -->
                <div id="damageBox" class="hidden bg-red-700 text-white p-4 rounded-lg">
                    <h3 class="font-bold mb-3">
                        <i class="fas fa-fire"></i> ì‹¤ì œ í”¼í•´ ì‚¬ë¡€
                    </h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex gap-2">
                            <span class="font-bold">1.</span>
                            <div><strong>OTP ìš°íšŒ ì´ì²´</strong><br>ì¸ì¦ ì—†ì´ ë¬´ë‹¨ ì´ì²´</div>
                        </div>
                        <div class="flex gap-2">
                            <span class="font-bold">2.</span>
                            <div><strong>ë°˜ë³µ ì´ì²´ ê³µê²©</strong><br>í† í° ì¬ì‚¬ìš©ìœ¼ë¡œ ë‹¤ì¤‘ ì´ì²´</div>
                        </div>
                        <div class="flex gap-2">
                            <span class="font-bold">3.</span>
                            <div><strong>ê¸ˆì•¡ ë³€ì¡°</strong><br>í™•ì¸ ë‹¨ê³„ ê±´ë„ˆë›°ê³  ê¸ˆì•¡ ì¡°ì‘</div>
                        </div>
                        <div class="flex gap-2">
                            <span class="font-bold">4.</span>
                            <div><strong>ëŒ€ëŸ‰ í”¼í•´</strong><br>ìë™í™” ê³µê²©ìœ¼ë¡œ ë‹¤ìˆ˜ ê³„ì¢Œ íƒˆì·¨</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        async function normalProcess() {
            resetProcess();
            await sleep(300);
            
            var badge = document.getElementById('statusBadge');
            badge.textContent = 'ì§„í–‰ì¤‘';
            badge.className = 'text-xs bg-blue-500 text-white px-3 py-1 rounded';
            
            // Step 1
            document.getElementById('step1Box').className = 'process-step active p-3 rounded';
            await sleep(1000);
            document.getElementById('step1Box').className = 'process-step completed p-3 rounded';
            
            // Step 2
            document.getElementById('step2Box').className = 'process-step active p-3 rounded';
            await sleep(1000);
            document.getElementById('step2Box').className = 'process-step completed p-3 rounded';
            
            // Step 3
            document.getElementById('step3Box').className = 'process-step active p-3 rounded';
            await sleep(1500);
            document.getElementById('step3Box').className = 'process-step completed p-3 rounded';
            
            // Step 4
            document.getElementById('step4Box').className = 'process-step active p-3 rounded';
            await sleep(1000);
            document.getElementById('step4Box').className = 'process-step completed p-3 rounded';
            
            badge.textContent = 'ì™„ë£Œ';
            badge.className = 'text-xs bg-green-500 text-white px-3 py-1 rounded';
            
            document.getElementById('attackResult').innerHTML = 
                '<div class="bg-green-50 border-l-4 border-green-500 p-4">' +
                '<h4 class="font-bold text-green-700 mb-2">âœ… ì •ìƒ í”„ë¡œì„¸ìŠ¤ ì™„ë£Œ</h4>' +
                '<p class="text-sm mb-2">ëª¨ë“  ë‹¨ê³„ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.</p>' +
                '<div class="bg-white p-3 rounded border text-xs">' +
                '<p>âœ“ Step 1: ì´ì²´ ì •ë³´ ì…ë ¥ ì™„ë£Œ</p>' +
                '<p>âœ“ Step 2: ì´ì²´ ì •ë³´ í™•ì¸ ì™„ë£Œ</p>' +
                '<p>âœ“ Step 3: OTP ì¸ì¦ ì™„ë£Œ</p>' +
                '<p>âœ“ Step 4: ì´ì²´ ì‹¤í–‰ ì™„ë£Œ</p>' +
                '</div></div>';
        }

        function resetProcess() {
            document.getElementById('step1Box').className = 'process-step bg-gray-200 p-3 rounded';
            document.getElementById('step2Box').className = 'process-step bg-gray-200 p-3 rounded';
            document.getElementById('step3Box').className = 'process-step bg-gray-200 p-3 rounded';
            document.getElementById('step4Box').className = 'process-step bg-gray-200 p-3 rounded';
            
            document.getElementById('attackResult').innerHTML = 
                '<div class="text-center text-gray-400 py-10">' +
                '<i class="fas fa-shield-halved text-5xl mb-3 opacity-30"></i>' +
                '<p class="text-sm">ê³µê²© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì„ íƒí•˜ì„¸ìš”</p></div>';
            
            document.getElementById('attackStages').classList.add('hidden');
            document.getElementById('terminalBox').classList.add('hidden');
            document.getElementById('judgementBox').classList.add('hidden');
            document.getElementById('damageBox').classList.add('hidden');
            document.getElementById('terminalLines').innerHTML = '';
            
            document.getElementById('statusBadge').textContent = 'ëŒ€ê¸°ì¤‘';
            document.getElementById('statusBadge').className = 'text-xs bg-green-500 text-gray-900 px-3 py-1 rounded';
        }

        async function attackScenario(type) {
            resetProcess();
            await sleep(200);
            
            var result = document.getElementById('attackResult');
            var badge = document.getElementById('statusBadge');
            
            document.getElementById('attackStages').classList.remove('hidden');
            document.getElementById('terminalBox').classList.remove('hidden');
            document.getElementById('judgementBox').classList.remove('hidden');
            document.getElementById('damageBox').classList.remove('hidden');
            
            if (type === 1) {
                // ì‹œë‚˜ë¦¬ì˜¤ 1: Step ê±´ë„ˆë›°ê¸°
                document.getElementById('stagesContent').innerHTML = 
                    '<div>1. Step 1: ì´ì²´ ì •ë³´ ì…ë ¥</div>' +
                    '<div>2. Step 2, 3 ê±´ë„ˆë›°ê¸° (OTP ìš°íšŒ)</div>' +
                    '<div>3. Step 4 ì§ì ‘ í˜¸ì¶œ</div>' +
                    '<div>4. ì´ì²´ ì‹¤í–‰ ì„±ê³µ!</div>';
                
                badge.textContent = 'ê³µê²©ì¤‘';
                badge.className = 'text-xs bg-red-500 text-white px-3 py-1 rounded';
                
                // Step 1
                document.getElementById('step1Box').className = 'process-step active p-3 rounded';
                addTerminalLine('> Step 1: ì´ì²´ ì •ë³´ ì…ë ¥');
                await sleep(800);
                document.getElementById('step1Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> ë°›ëŠ” ê³„ì¢Œ: 110-123-456789');
                addTerminalLine('> ê¸ˆì•¡: 5,000,000ì›');
                await sleep(500);
                
                // Step 2, 3 ê±´ë„ˆë›°ê¸°
                document.getElementById('step2Box').className = 'process-step bypassed p-3 rounded';
                document.getElementById('step3Box').className = 'process-step bypassed p-3 rounded';
                addTerminalLine('> [!] Step 2, 3 ê±´ë„ˆë›°ê¸°!', 'text-red-400');
                await sleep(800);
                
                // Step 4 ì§ì ‘ ì‹¤í–‰
                addTerminalLine('> POST /transfer/execute ì§ì ‘ í˜¸ì¶œ', 'text-yellow-400');
                await sleep(500);
                document.getElementById('step4Box').className = 'process-step active p-3 rounded';
                addTerminalLine('> toAccount=110123456789&amount=5000000');
                await sleep(1000);
                
                document.getElementById('step4Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> âœ“ ì´ì²´ ì‹¤í–‰ ì„±ê³µ!', 'text-red-400');
                addTerminalLine('> OTP ì—†ì´ 500ë§Œì› ì´ì²´ ì™„ë£Œ', 'text-red-400');
                
                result.innerHTML = 
                    '<div class="bg-red-50 border-l-4 border-red-500 p-4">' +
                    '<h4 class="font-bold text-red-700 mb-3">ğŸš¨ í”„ë¡œì„¸ìŠ¤ ìš°íšŒ ì„±ê³µ</h4>' +
                    '<div class="bg-white p-3 rounded mb-3 border">' +
                    '<p class="text-sm font-bold mb-2">ê³µê²© ë¶„ì„:</p>' +
                    '<table class="w-full text-xs">' +
                    '<tr class="border-b"><th class="text-left py-1">ë‹¨ê³„</th><th class="text-left py-1">ìƒíƒœ</th></tr>' +
                    '<tr class="border-b"><td class="py-1">Step 1</td><td class="py-1 text-green-600">ì •ìƒ ì™„ë£Œ</td></tr>' +
                    '<tr class="border-b bg-red-50"><td class="py-1">Step 2</td><td class="py-1 text-red-600">ê±´ë„ˆëœ€</td></tr>' +
                    '<tr class="border-b bg-red-50"><td class="py-1">Step 3 (OTP)</td><td class="py-1 text-red-600">ê±´ë„ˆëœ€</td></tr>' +
                    '<tr><td class="py-1">Step 4</td><td class="py-1 text-red-600">ìš°íšŒ ì‹¤í–‰</td></tr>' +
                    '</table></div>' +
                    '<div class="bg-red-900 text-red-100 p-3 rounded text-sm">' +
                    '<p class="font-bold">ğŸ’° ì´ì²´ ì™„ë£Œ</p>' +
                    '<p>ê¸ˆì•¡: 5,000,000ì›</p>' +
                    '<p>OTP ì¸ì¦: ì—†ìŒ</p>' +
                    '</div></div>';
                
                document.getElementById('evidence').textContent = 'ë‹¨ê³„ë³„ ê²€ì¦ ë¯¸ìˆ˜í–‰';
                
            } else if (type === 2) {
                // ì‹œë‚˜ë¦¬ì˜¤ 2: API ì§ì ‘ í˜¸ì¶œ
                document.getElementById('stagesContent').innerHTML = 
                    '<div>1. Burp Suiteë¡œ ì •ìƒ ìš”ì²­ ìº¡ì²˜</div>' +
                    '<div>2. /transfer/execute API ë¶„ì„</div>' +
                    '<div>3. í•„ìš” íŒŒë¼ë¯¸í„° íŒŒì•…</div>' +
                    '<div>4. curlë¡œ ì§ì ‘ í˜¸ì¶œ</div>';
                
                addTerminalLine('> Burp Suite ì‹¤í–‰...');
                await sleep(500);
                addTerminalLine('> ì •ìƒ ì´ì²´ ìš”ì²­ ìº¡ì²˜ ì™„ë£Œ');
                await sleep(500);
                addTerminalLine('> API ì—”ë“œí¬ì¸íŠ¸ ë¶„ì„:');
                addTerminalLine('  POST /transfer/execute', 'text-yellow-400');
                await sleep(500);
                addTerminalLine('> í•„ìš” íŒŒë¼ë¯¸í„°:');
                addTerminalLine('  - toAccount (ê³„ì¢Œë²ˆí˜¸)');
                addTerminalLine('  - amount (ê¸ˆì•¡)');
                await sleep(800);
                addTerminalLine('> curl ëª…ë ¹ì–´ ìƒì„±:', 'text-yellow-400');
                await sleep(300);
                addTerminalLine('curl -X POST https://bank.com/transfer/execute \\', 'text-green-400');
                addTerminalLine('  -d "toAccount=999-888-777777" \\', 'text-green-400');
                addTerminalLine('  -d "amount=10000000" \\', 'text-green-400');
                addTerminalLine('  -H "Cookie: JSESSIONID=ABC123..."', 'text-green-400');
                await sleep(1000);
                addTerminalLine('> [!] ì´ì²´ ì„±ê³µ!', 'text-red-400');
                addTerminalLine('> 1ì²œë§Œì› ì´ì²´ ì™„ë£Œ', 'text-red-400');
                
                document.getElementById('step1Box').className = 'process-step bypassed p-3 rounded';
                document.getElementById('step2Box').className = 'process-step bypassed p-3 rounded';
                document.getElementById('step3Box').className = 'process-step bypassed p-3 rounded';
                document.getElementById('step4Box').className = 'process-step completed p-3 rounded';
                
                result.innerHTML = 
                    '<div class="bg-red-50 border-l-4 border-red-500 p-4">' +
                    '<h4 class="font-bold text-red-700 mb-3">ğŸš¨ API ì§ì ‘ í˜¸ì¶œ ì„±ê³µ</h4>' +
                    '<div class="bg-gray-900 text-green-400 p-3 rounded mb-3 code-font text-xs">' +
                    '<div class="text-white mb-2">$ curl -X POST \\</div>' +
                    '<div>  https://bank.com/transfer/execute \\</div>' +
                    '<div>  -d "toAccount=999888777777" \\</div>' +
                    '<div>  -d "amount=10000000"</div>' +
                    '<div class="text-red-400 mt-2">{"status":"success"}</div>' +
                    '</div>' +
                    '<div class="bg-red-900 text-red-100 p-3 rounded text-sm">' +
                    '<p class="font-bold">ğŸ’° ë¬´ë‹¨ ì´ì²´</p>' +
                    '<p>ê¸ˆì•¡: 10,000,000ì›</p>' +
                    '<p>ë°©ë²•: API ì§ì ‘ í˜¸ì¶œ</p>' +
                    '<p>ê²€ì¦: ì—†ìŒ</p>' +
                    '</div></div>';
                
                document.getElementById('evidence').textContent = 'API ë ˆë²¨ ê²€ì¦ ë¶€ì¬';
                badge.textContent = 'ì¹˜ëª…ì ';
                badge.className = 'text-xs bg-red-600 text-white px-3 py-1 rounded';
                
            } else if (type === 3) {
                // ì‹œë‚˜ë¦¬ì˜¤ 3: í† í° ì¬ì‚¬ìš©
                document.getElementById('stagesContent').innerHTML = 
                    '<div>1. ì •ìƒ í”„ë¡œì„¸ìŠ¤ë¡œ í† í° íšë“</div>' +
                    '<div>2. ì´ì²´ ì‹¤í–‰ í›„ í† í° ì €ì¥</div>' +
                    '<div>3. ë™ì¼ í† í°ìœ¼ë¡œ ì¬ìš”ì²­</div>' +
                    '<div>4. ì¤‘ë³µ ì´ì²´ ì‹¤í–‰!</div>';
                
                addTerminalLine('> ì •ìƒ ì´ì²´ í”„ë¡œì„¸ìŠ¤ ì‹œì‘...');
                await sleep(500);
                
                document.getElementById('step1Box').className = 'process-step completed p-3 rounded';
                document.getElementById('step2Box').className = 'process-step completed p-3 rounded';
                document.getElementById('step3Box').className = 'process-step completed p-3 rounded';
                
                addTerminalLine('> executeToken íšë“: abc123def456');
                await sleep(500);
                
                document.getElementById('step4Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> âœ“ 1ì°¨ ì´ì²´ ì™„ë£Œ (100ë§Œì›)');
                await sleep(800);
                
                addTerminalLine('> [!] í† í° ì¬ì‚¬ìš© ì‹œë„!', 'text-red-400');
                await sleep(500);
                addTerminalLine('> POST /transfer/execute', 'text-yellow-400');
                addTerminalLine('> executeToken=abc123def456 (ë™ì¼)');
                await sleep(1000);
                addTerminalLine('> âœ“ 2ì°¨ ì´ì²´ ì™„ë£Œ (100ë§Œì›)', 'text-red-400');
                await sleep(500);
                addTerminalLine('> âœ“ 3ì°¨ ì´ì²´ ì™„ë£Œ (100ë§Œì›)', 'text-red-400');
                await sleep(500);
                addTerminalLine('> âœ“ 4ì°¨ ì´ì²´ ì™„ë£Œ (100ë§Œì›)', 'text-red-400');
                await sleep(500);
                addTerminalLine('> ì´ í”¼í•´ì•¡: 400ë§Œì›', 'text-red-400');
                
                result.innerHTML = 
                    '<div class="bg-red-50 border-l-4 border-red-500 p-4">' +
                    '<h4 class="font-bold text-red-700 mb-3">ğŸš¨ í† í° ì¬ì‚¬ìš© ê³µê²©</h4>' +
                    '<div class="bg-white p-3 rounded mb-3 border">' +
                    '<p class="text-sm font-bold mb-2">ì´ì²´ ë‚´ì—­:</p>' +
                    '<table class="w-full text-xs">' +
                    '<tr class="border-b"><th class="text-left py-1">ìˆœë²ˆ</th><th class="text-left py-1">ê¸ˆì•¡</th><th class="text-left py-1">í† í°</th></tr>' +
                    '<tr class="border-b"><td class="py-1">1ì°¨</td><td class="py-1">1,000,000ì›</td><td class="py-1 text-xs">abc123...</td></tr>' +
                    '<tr class="border-b bg-red-50"><td class="py-1">2ì°¨</td><td class="py-1 text-red-600">1,000,000ì›</td><td class="py-1 text-red-600 text-xs">abc123... (ì¬ì‚¬ìš©)</td></tr>' +
                    '<tr class="border-b bg-red-50"><td class="py-1">3ì°¨</td><td class="py-1 text-red-600">1,000,000ì›</td><td class="py-1 text-red-600 text-xs">abc123... (ì¬ì‚¬ìš©)</td></tr>' +
                    '<tr class="bg-red-50"><td class="py-1">4ì°¨</td><td class="py-1 text-red-600">1,000,000ì›</td><td class="py-1 text-red-600 text-xs">abc123... (ì¬ì‚¬ìš©)</td></tr>' +
                    '</table></div>' +
                    '<div class="bg-red-900 text-red-100 p-3 rounded text-sm">' +
                    '<p class="font-bold">ğŸ’° ì¤‘ë³µ ì´ì²´ í”¼í•´</p>' +
                    '<p>ì´ í”¼í•´ì•¡: 4,000,000ì›</p>' +
                    '<p>ì´ì²´ íšŸìˆ˜: 4íšŒ (1íšŒë§Œ ì¸ì¦)</p>' +
                    '</div></div>';
                
                document.getElementById('evidence').textContent = 'í† í° ì¼íšŒìš© ê²€ì¦ ë¯¸ìˆ˜í–‰';
                badge.textContent = 'ì¹˜ëª…ì ';
                badge.className = 'text-xs bg-red-600 text-white px-3 py-1 rounded';
                
            } else if (type === 4) {
                // ì‹œë‚˜ë¦¬ì˜¤ 4: OTP ì—†ì´ ì´ì²´
                document.getElementById('stagesContent').innerHTML = 
                    '<div>1. ì„¸ì…˜ í•˜ì´ì¬í‚¹ìœ¼ë¡œ ë¡œê·¸ì¸</div>' +
                    '<div>2. Step 1,2ë§Œ ì™„ë£Œ</div>' +
                    '<div>3. OTP ì¸ì¦ ìš°íšŒ</div>' +
                    '<div>4. ëŒ€ëŸ‰ ì´ì²´ ìë™í™”</div>';
                
                addTerminalLine('> XSSë¡œ ì„¸ì…˜ ì¿ í‚¤ íƒˆì·¨');
                await sleep(500);
                addTerminalLine('> JSESSIONID=DEF789...');
                await sleep(500);
                addTerminalLine('> í”¼í•´ì ê³„ì • ë¡œê·¸ì¸ ì„±ê³µ');
                await sleep(800);
                
                document.getElementById('step1Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> Step 1: ì´ì²´ ì •ë³´ ì…ë ¥ (ìë™í™”)');
                await sleep(500);
                
                document.getElementById('step2Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> Step 2: í™•ì¸ ë‹¨ê³„ (ìë™ í†µê³¼)');
                await sleep(500);
                
                document.getElementById('step3Box').className = 'process-step bypassed p-3 rounded';
                addTerminalLine('> [!] Step 3: OTP ê²€ì¦ ìš°íšŒ!', 'text-red-400');
                await sleep(800);
                
                document.getElementById('step4Box').className = 'process-step completed p-3 rounded';
                addTerminalLine('> Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰...', 'text-yellow-400');
                await sleep(500);
                addTerminalLine('> ì´ì²´ #1: 500,000ì› ì„±ê³µ', 'text-red-400');
                await sleep(300);
                addTerminalLine('> ì´ì²´ #2: 500,000ì› ì„±ê³µ', 'text-red-400');
                await sleep(300);
                addTerminalLine('> ì´ì²´ #3: 500,000ì› ì„±ê³µ', 'text-red-400');
                await sleep(300);
                addTerminalLine('> ì´ì²´ #4: 500,000ì› ì„±ê³µ', 'text-red-400');
                await sleep(300);
                addTerminalLine('> ì´ì²´ #5: 500,000ì› ì„±ê³µ', 'text-red-400');
                await sleep(500);
                addTerminalLine('> ì´ 250ë§Œì› ë¹¼ëŒë¦¼ ì™„ë£Œ', 'text-red-400');
                
                result.innerHTML = 
                    '<div class="bg-red-50 border-l-4 border-red-500 p-4">' +
                    '<h4 class="font-bold text-red-700 mb-3">ğŸš¨ ìë™í™” ê³µê²© ì„±ê³µ</h4>' +
                    '<div class="bg-gray-900 text-green-400 p-3 rounded mb-3 code-font text-xs">' +
                    '<div class="text-white">import requests</div>' +
                    '<div></div>' +
                    '<div>for i in range(5):</div>' +
                    '<div class="ml-4">requests.post(</div>' +
                    '<div class="ml-8">"https://bank.com/transfer/execute",</div>' +
                    '<div class="ml-8">data={"amount": 500000}</div>' +
                    '<div class="ml-4">)</div>' +
                    '<div class="text-red-400 mt-2"># OTP ì—†ì´ 5íšŒ ì—°ì† ì´ì²´!</div>' +
                    '</div>' +
                    '<div class="bg-red-900 text-red-100 p-3 rounded text-sm">' +
                    '<p class="font-bold">ğŸ’° ìë™í™” ê³µê²© í”¼í•´</p>' +
                    '<p>ì´ì²´ íšŸìˆ˜: 5íšŒ</p>' +
                    '<p>ì´ í”¼í•´ì•¡: 2,500,000ì›</p>' +
                    '<p>ì†Œìš” ì‹œê°„: 3ì´ˆ</p>' +
                    '</div></div>';
                
                document.getElementById('evidence').textContent = 'OTP ê²€ì¦ ê°•ì œ ë¯¸ìˆ˜í–‰';
                badge.textContent = 'ì¹˜ëª…ì ';
                badge.className = 'text-xs bg-red-600 text-white px-3 py-1 rounded';
            }
        }

        function addTerminalLine(text, color) {
            var div = document.createElement('div');
            div.className = color || 'text-green-400';
            div.textContent = text;
            document.getElementById('terminalLines').appendChild(div);
            document.getElementById('terminalLines').scrollTop = 
                document.getElementById('terminalLines').scrollHeight;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>