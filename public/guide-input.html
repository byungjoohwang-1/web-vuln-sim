<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2-1. 입력 데이터 검증 및 표현</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        code, pre { font-family: 'Fira Code', monospace; }
        
        /* Syntax Highlighting Simulators */
        .code-keyword { color: #c678dd; } /* purple */
        .code-function { color: #61afef; } /* blue */
        .code-string { color: #98c379; } /* green */
        .code-comment { color: #5c6370; font-style: italic; } /* gray */
        .code-class { color: #e5c07b; } /* yellow */
        
        .nav-active {
            border-left-color: #4f46e5; /* indigo-600 */
            color: #4f46e5;
            font-weight: 700;
            background-color: #eef2ff;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="flex min-h-screen">
        
        <!-- Table of Contents (Right Side or Sticky) -->
        <nav class="hidden xl:block w-64 bg-white border-r border-slate-200 fixed h-full overflow-y-auto z-10">
            <div class="p-6">
                <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                    <i class="fas fa-list-ul text-indigo-500"></i> 목차
                </h3>
                <ul class="space-y-1 text-sm text-slate-600">
                    <li><a href="#intro" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">개요</a></li>
                    <li><a href="#sql-injection" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">1. SQL 삽입 (Injection)</a></li>
                    <li><a href="#path-traversal" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">2. 경로 조작 및 자원 삽입</a></li>
                    <li><a href="#xss" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">3. 크로스사이트 스크립트 (XSS)</a></li>
                    <li><a href="#command-injection" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">4. 운영체제 명령어 삽입</a></li>
                    <li><a href="#file-upload" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">5. 위험한 형식 파일 업로드</a></li>
                    <li><a href="#http-splitting" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">6. HTTP 응답 분할</a></li>
                    <li><a href="#ldap-injection" class="block py-2 px-3 border-l-4 border-transparent hover:bg-slate-50 hover:text-indigo-600 transition">7. LDAP 삽입</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 xl:ml-64 p-8 max-w-5xl mx-auto">
            
            <!-- Header -->
            <header id="intro" class="mb-12 border-b border-slate-200 pb-8">
                <div class="flex items-center gap-3 mb-2">
                    <span class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold">Category 2-1</span>
                    <span class="text-slate-500 text-sm">소프트웨어 보안약점 진단가이드</span>
                </div>
                <h1 class="text-3xl font-bold text-slate-900 mb-4">입력 데이터 검증 및 표현</h1>
                <p class="text-slate-600 leading-relaxed">
                    프로그램 입력값에 대한 검증 누락 또는 부적절한 검증, 데이터의 잘못된 형식 지정으로 인해 발생하는 보안 약점입니다.
                    <br>사용자가 입력한 데이터는 <strong>절대 신뢰하지 않는다</strong>는 원칙하에 모든 입력값에 대해 유효성 검증을 수행해야 합니다.
                </p>
            </header>

            <!-- 1. SQL Injection -->
            <section id="sql-injection" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">1</div>
                    <h2 class="text-2xl font-bold text-slate-800">SQL 삽입 (SQL Injection)</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6 border-b border-slate-100">
                        <p class="text-slate-600 mb-4">
                            외부로부터 입력된 인자값을 검증하지 않고 쿼리 문자열 생성에 그대로 사용하여, 악의적인 쿼리가 실행되어 정보를 유출하거나 조작할 수 있는 보안 약점입니다.
                        </p>
                    </div>

                    <!-- Vulnerable Code -->
                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <div class="bg-slate-50 p-6 border-r border-slate-200">
                            <h4 class="text-red-600 font-bold mb-3 flex items-center gap-2">
                                <i class="fas fa-times-circle"></i> 취약한 코드 예제
                            </h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-comment">// 외부 입력값(name)을 쿼리에 직접 연결</span>
<span class="code-keyword">String</span> name = request.getParameter(<span class="code-string">"name"</span>);

<span class="code-keyword">String</span> query = <span class="code-string">"SELECT * FROM user WHERE name = '"</span> 
             + name + <span class="code-string">"'"</span>;

<span class="code-keyword">try</span> {
    Statement stmt = connection.createStatement();
    <span class="code-comment">// 입력값에 ' OR '1'='1 이 들어오면 
    // 모든 정보가 유출됨</span>
    ResultSet rs = stmt.executeQuery(query); 
} <span class="code-keyword">catch</span> (SQLException e) {
    ...
}</pre>
                        </div>

                        <!-- Secure Code -->
                        <div class="bg-white p-6">
                            <h4 class="text-emerald-600 font-bold mb-3 flex items-center gap-2">
                                <i class="fas fa-check-circle"></i> 안전한 코드 예제
                            </h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> name = request.getParameter(<span class="code-string">"name"</span>);

<span class="code-comment">// ?(물음표)를 사용하여 파라미터를 바인딩(PreparedStatement)</span>
<span class="code-keyword">String</span> query = <span class="code-string">"SELECT * FROM user WHERE name = ?"</span>;

<span class="code-keyword">try</span> {
    <span class="code-class">PreparedStatement</span> pstmt = 
        connection.prepareStatement(query);
    
    <span class="code-comment">// 입력값을 바인딩 변수로 설정하여
    // 쿼리 구조 변경을 막음</span>
    pstmt.setString(1, name);
    
    ResultSet rs = pstmt.executeQuery();
} <span class="code-keyword">catch</span> (SQLException e) {
    ...
}</pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Path Traversal -->
            <section id="path-traversal" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">2</div>
                    <h2 class="text-2xl font-bold text-slate-800">경로 조작 및 자원 삽입</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6 border-b border-slate-100">
                        <p class="text-slate-600 mb-4">
                            외부 입력값을 파일 경로 조작에 사용하여 시스템 파일 등 접근 권한이 없는 파일에 접근하거나 수정할 수 있는 보안 약점입니다. 
                            <code>../</code> 와 같은 상위 경로 이동 문자를 필터링해야 합니다.
                        </p>
                    </div>

                    <!-- Comparison -->
                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <div class="bg-slate-50 p-6 border-r border-slate-200">
                            <h4 class="text-red-600 font-bold mb-3">
                                <i class="fas fa-times-circle"></i> 취약한 코드
                            </h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> fileName = request.getParameter(<span class="code-string">"file"</span>);

<span class="code-comment">// 입력값: ../../../etc/passwd</span>
File file = <span class="code-keyword">new</span> File(<span class="code-string">"/usr/local/data/"</span> + fileName);

<span class="code-keyword">if</span> (file.exists()) {
    <span class="code-comment">// 시스템 중요 파일이 노출됨</span>
    BufferedReader br = 
        <span class="code-keyword">new</span> BufferedReader(<span class="code-keyword">new</span> FileReader(file));
    ...
}</pre>
                        </div>
                        <div class="bg-white p-6">
                            <h4 class="text-emerald-600 font-bold mb-3">
                                <i class="fas fa-check-circle"></i> 안전한 코드
                            </h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> fileName = request.getParameter(<span class="code-string">"file"</span>);

<span class="code-comment">// 1. 경로 순회 문자 제거 (필터링)</span>
fileName = fileName.replaceAll(<span class="code-string">"\\.\\."</span>, <span class="code-string">""</span>);
fileName = fileName.replaceAll(<span class="code-string">"/"</span>, <span class="code-string">""</span>);
fileName = fileName.replaceAll(<span class="code-string">"\\\\"</span>, <span class="code-string">""</span>);

File file = <span class="code-keyword">new</span> File(<span class="code-string">"/usr/local/data/"</span> + fileName);

<span class="code-comment">// 2. 허용된 경로인지 다시 확인 (CanonicalPath)</span>
<span class="code-keyword">if</span> (!file.getCanonicalPath().startsWith(<span class="code-string">"/usr/local/data"</span>)) {
    <span class="code-keyword">throw</span> <span class="code-keyword">new</span> IOException(<span class="code-string">"Invalid Path"</span>);
}

<span class="code-keyword">if</span> (file.exists()) { ... }</pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. XSS -->
            <section id="xss" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">3</div>
                    <h2 class="text-2xl font-bold text-slate-800">크로스사이트 스크립트 (XSS)</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6">
                        <p class="text-slate-600 mb-4">
                            검증되지 않은 외부 입력값이 브라우저에서 실행되는 스크립트 코드(<code>&lt;script&gt;</code>)를 포함하여 사용자 세션을 탈취하거나 악성 행위를 수행하는 약점입니다.
                        </p>
                        <div class="p-4 bg-indigo-50 border-l-4 border-indigo-500 rounded text-sm text-indigo-900">
                            <strong>Tip:</strong> HTML Entity 변환(치환)을 수행하는 라이브러리(Naver Lucy XSS Filter, OWASP Java Encoder 등)를 사용하는 것이 가장 안전합니다.
                        </div>
                    </div>

                    <!-- Secure Code Full Block -->
                    <div class="bg-slate-900 text-slate-300 p-6 rounded-none lg:rounded-b-xl overflow-x-auto">
                        <h4 class="text-emerald-400 font-bold mb-3 border-b border-slate-700 pb-2">안전한 코드 구현 (HTML Entity Encoding)</h4>
                        <pre class="font-mono text-xs leading-relaxed">
<span class="code-keyword">public</span> <span class="code-keyword">String</span> cleanXSS(<span class="code-keyword">String</span> value) {
    <span class="code-keyword">if</span> (value == <span class="code-keyword">null</span>) <span class="code-keyword">return</span> <span class="code-keyword">null</span>;
    
    <span class="code-keyword">StringBuffer</span> ret = <span class="code-keyword">new</span> StringBuffer();
    <span class="code-keyword">for</span> (<span class="code-keyword">int</span> i = 0; i < value.length(); i++) {
        <span class="code-keyword">char</span> ch = value.charAt(i);
        <span class="code-keyword">switch</span> (ch) {
            <span class="code-keyword">case</span> <span class="code-string">'&'</span>: ret.append(<span class="code-string">"&amp;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'<'</span>: ret.append(<span class="code-string">"&lt;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'>'</span>: ret.append(<span class="code-string">"&gt;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'\"'</span>: ret.append(<span class="code-string">"&quot;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'\''</span>: ret.append(<span class="code-string">"&#x27;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'/'</span>: ret.append(<span class="code-string">"&#x2F;"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">default</span>: ret.append(ch); <span class="code-keyword">break</span>;
        }
    }
    <span class="code-keyword">return</span> ret.toString();
}

<span class="code-comment">// JSP 등에서 출력 시 사용</span>
<span class="code-string">&lt;%= cleanXSS(request.getParameter("content")) %&gt;</span>
<span class="code-comment">// 또는 JSTL의 c:out 사용 (기본적으로 escapeXml=true)</span>
<span class="code-string">&lt;c:out value="${param.content}" /&gt;</span>
</pre>
                    </div>
                </div>
            </section>

            <!-- 4. Command Injection -->
            <section id="command-injection" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">4</div>
                    <h2 class="text-2xl font-bold text-slate-800">운영체제 명령어 삽입</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6 border-b border-slate-100">
                        <p class="text-slate-600">
                            <code>Runtime.exec()</code> 등의 메소드를 사용하여 시스템 명령어를 실행할 때, 입력값을 검증하지 않아 공격자가 의도하지 않은 시스템 명령어를 실행하게 하는 약점입니다.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <div class="bg-slate-50 p-6 border-r border-slate-200">
                            <h4 class="text-red-600 font-bold mb-3"><i class="fas fa-times-circle"></i> 취약한 코드</h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> cmd = request.getParameter(<span class="code-string">"cmd"</span>);

<span class="code-comment">// 입력값이 "dir & del *.*" 일 경우
// 파일 삭제 명령어가 함께 실행됨</span>
Process p = Runtime.getRuntime().exec(
    <span class="code-string">"cmd.exe /c "</span> + cmd
);</pre>
                        </div>
                        <div class="bg-white p-6">
                            <h4 class="text-emerald-600 font-bold mb-3"><i class="fas fa-check-circle"></i> 안전한 코드</h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> cmd = request.getParameter(<span class="code-string">"cmd"</span>);

<span class="code-comment">// 1. 허용된 명령어 목록(WhiteList) 정의</span>
<span class="code-keyword">String</span>[] allowed = {<span class="code-string">"dir"</span>, <span class="code-string">"type"</span>};
<span class="code-keyword">int</span> idx = Integer.parseInt(cmd);

<span class="code-keyword">if</span> (idx >= 0 && idx < allowed.length) {
    <span class="code-comment">// 2. 미리 정의된 명령어만 사용</span>
    <span class="code-keyword">String</span> runCmd = allowed[idx]; 
    Process p = Runtime.getRuntime().exec(
        <span class="code-string">"cmd.exe /c "</span> + runCmd
    );
}</pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. Unrestricted File Upload -->
            <section id="file-upload" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">5</div>
                    <h2 class="text-2xl font-bold text-slate-800">위험한 형식 파일 업로드</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6">
                        <p class="text-slate-600 mb-4">
                            서버 측에서 실행 가능한 확장자(.jsp, .php, .exe 등)를 가진 파일 업로드를 허용할 경우, 공격자가 웹 쉘(Web Shell)을 업로드하여 시스템을 장악할 수 있습니다.
                        </p>
                    </div>

                    <div class="bg-slate-900 text-slate-300 p-6">
                        <h4 class="text-emerald-400 font-bold mb-3">안전한 파일 업로드 검증 로직</h4>
                        <pre class="font-mono text-xs leading-relaxed">
<span class="code-keyword">String</span> fileName = file.getOriginalFilename();

<span class="code-keyword">if</span> (fileName != <span class="code-keyword">null</span>) {
    <span class="code-comment">// 1. 확장자 추출 및 소문자 변환</span>
    <span class="code-keyword">String</span> ext = fileName.substring(
        fileName.lastIndexOf(<span class="code-string">"."</span>) + 1).toLowerCase();
        
    <span class="code-comment">// 2. 허용된 확장자(WhiteList) 목록 검사</span>
    <span class="code-keyword">if</span> (!<span class="code-string">"jpg"</span>.equals(ext) && !<span class="code-string">"png"</span>.equals(ext) && !<span class="code-string">"gif"</span>.equals(ext)) {
        <span class="code-keyword">throw</span> <span class="code-keyword">new</span> Exception(<span class="code-string">"허용되지 않은 파일 형식입니다."</span>);
    }
    
    <span class="code-comment">// 3. 파일명 난수화 (덮어쓰기 및 경로 노출 방지)</span>
    <span class="code-keyword">String</span> newFileName = UUID.randomUUID().toString() + <span class="code-string">"."</span> + ext;
    
    File uploadDir = <span class="code-keyword">new</span> File(<span class="code-string">"/upload_safe_zone/"</span>);
    
    <span class="code-comment">// 4. 실행 권한 제거 (setExecutable false)</span>
    File dest = <span class="code-keyword">new</span> File(uploadDir, newFileName);
    dest.setExecutable(<span class="code-keyword">false</span>);
    
    file.transferTo(dest);
}</pre>
                    </div>
                </div>
            </section>

             <!-- 6. HTTP Splitting -->
             <section id="http-splitting" class="mb-16 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">6</div>
                    <h2 class="text-2xl font-bold text-slate-800">HTTP 응답 분할</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6 border-b border-slate-100">
                        <p class="text-slate-600">
                            HTTP 응답 헤더에 개행 문자(CR, LF)를 포함시켜, 응답을 여러 개로 분할하여 악성 코드를 주입하거나 캐시를 중독시키는 공격입니다.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <div class="bg-slate-50 p-6 border-r border-slate-200">
                            <h4 class="text-red-600 font-bold mb-3"><i class="fas fa-times-circle"></i> 취약한 코드</h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> author = request.getParameter(<span class="code-string">"author"</span>);

<span class="code-comment">// 입력값에 \r\n이 포함되면 헤더가 분할됨</span>
Cookie cookie = <span class="code-keyword">new</span> Cookie(<span class="code-string">"author"</span>, author);
response.addCookie(cookie);</pre>
                        </div>
                        <div class="bg-white p-6">
                            <h4 class="text-emerald-600 font-bold mb-3"><i class="fas fa-check-circle"></i> 안전한 코드</h4>
                            <pre class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed overflow-x-auto">
<span class="code-keyword">String</span> author = request.getParameter(<span class="code-string">"author"</span>);

<span class="code-keyword">if</span> (author != <span class="code-keyword">null</span>) {
    <span class="code-comment">// CR(\r), LF(\n) 문자를 제거(Replace)</span>
    author = author.replaceAll(<span class="code-string">"\\r"</span>, <span class="code-string">""</span>);
    author = author.replaceAll(<span class="code-string">"\\n"</span>, <span class="code-string">""</span>);
    
    Cookie cookie = <span class="code-keyword">new</span> Cookie(<span class="code-string">"author"</span>, author);
    response.addCookie(cookie);
}</pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 7. LDAP Injection -->
            <section id="ldap-injection" class="mb-20 scroll-mt-20">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center text-red-600 text-xl font-bold">7</div>
                    <h2 class="text-2xl font-bold text-slate-800">LDAP 삽입</h2>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <p class="text-slate-600 mb-4">
                        LDAP 쿼리 생성 시 특수문자(*, (, ), \, & 등)를 필터링하지 않아, 인증 우회나 정보 유출이 발생하는 취약점입니다.
                    </p>
                    <div class="bg-slate-900 text-slate-300 p-4 rounded-lg text-xs leading-relaxed">
                        <pre><span class="code-comment">// [안전한 방법] 특수문자 이스케이프 처리 함수 사용</span>
<span class="code-keyword">public</span> <span class="code-keyword">String</span> escapeLDAP(<span class="code-keyword">String</span> input) {
    <span class="code-keyword">StringBuilder</span> sb = <span class="code-keyword">new</span> StringBuilder();
    <span class="code-keyword">for</span> (<span class="code-keyword">int</span> i=0; i < input.length(); i++) {
        <span class="code-keyword">char</span> c = input.charAt(i);
        <span class="code-keyword">switch</span>(c) {
            <span class="code-keyword">case</span> <span class="code-string">'\\'</span>: sb.append(<span class="code-string">"\\5c"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'*'</span>: sb.append(<span class="code-string">"\\2a"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'('</span>: sb.append(<span class="code-string">"\\28"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">')'</span>: sb.append(<span class="code-string">"\\29"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">case</span> <span class="code-string">'\0'</span>: sb.append(<span class="code-string">"\\00"</span>); <span class="code-keyword">break</span>;
            <span class="code-keyword">default</span>: sb.append(c);
        }
    }
    <span class="code-keyword">return</span> sb.toString();
}</pre>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // Scroll spy for navigation
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('nav a');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('nav-active');
                if (link.getAttribute('href').includes(current)) {
                    link.classList.add('nav-active');
                }
            });
        });
    </script>
</body>
</html>