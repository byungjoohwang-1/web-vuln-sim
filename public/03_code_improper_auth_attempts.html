<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë°˜ë³µëœ ì¸ì¦ì‹œë„ ì œí•œ ê¸°ëŠ¥ ë¶€ì¬ - ì‹¤ìŠµ ì‹œë®¬ë ˆì´í„°</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        /* SignatureSimulatorì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ (Red-Orange Theme) */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Malgun Gothic', sans-serif; background: linear-gradient(135deg, #ffccbc 0%, #ffab91 100%); padding: 20px; }
        .container { max-width: 1600px; margin: 0 auto; }
        .header { background: white; padding: 30px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border-bottom: 5px solid #d84315; }
        .header h1 { color: #d84315; font-size: 32px; margin-bottom: 10px; }
        .mode-tabs { display: flex; gap: 15px; margin-bottom: 20px; }
        .mode-tab { flex: 1; padding: 20px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 12px; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: left; }
        .mode-tab.active { background: linear-gradient(135deg, #d84315 0%, #ff5722 100%); color: white; }
        .mode-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
        .content-wrapper { display: none; }
        .content-wrapper.active { display: block; }
        .progress-indicator { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .checklist { list-style: none; padding: 0; display: flex; gap: 15px; }
        .checklist-item { padding: 8px 15px; background: #f8f9fa; border-radius: 20px; display: flex; align-items: center; gap: 8px; font-size: 14px; border: 1px solid #e9ecef; }
        .checklist-item.completed { background: #d4edda; border-color: #c3e6cb; color: #155724; font-weight: bold; }
        .main-content { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; }
        .panel { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); display: flex; flex-direction: column; }
        .panel-header { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 3px solid #f0f0f0; padding-bottom: 15px; }
        .panel-title { font-size: 20px; font-weight: bold; color: #2c3e50; }
        .status-badge { padding: 6px 16px; border-radius: 20px; font-size: 13px; font-weight: bold; }
        .status-vulnerable { background: #dc3545; color: white; }
        .status-secure { background: #28a745; color: white; }
        .status-editing { background: #ffc107; color: #000; }
        .code-editor { background: #1e1e1e; border-radius: 8px; overflow: hidden; min-height: 400px; }
        textarea { width: 100%; height: 400px; background: #1e1e1e; color: #d4d4d4; padding: 15px; border: none; font-family: monospace; resize: none; outline: none; }
        .code-display { padding: 15px; overflow: auto; height: 400px; }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; margin-right: 10px; }
        .btn-validate { background: #28a745; color: white; }
        .btn-analyze { background: #d84315; color: white; }
        .btn-hint { background: #ffc107; color: #000; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .feedback { margin-top: 20px; }
        .feedback-item { padding: 15px; border-radius: 8px; margin-bottom: 10px; }
        .feedback-error { background: #fff5f5; border-left: 4px solid #dc3545; }
        .feedback-success { background: #d4edda; border-left: 4px solid #28a745; }
        .edit-toggle-btn { background: #007acc; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; float: right; }
        .hint-panel { background: #fff8dc; border: 2px solid #ffc107; border-radius: 10px; padding: 20px; margin-top: 20px; display: none; }
        .hint-panel.active { display: block; animation: slideIn 0.3s ease-out; }
        .hint-step { background: white; padding: 12px; margin-bottom: 10px; border-radius: 6px; border-left: 3px solid #ffc107; }
        .hint-code { background: #1e1e1e; color: #d4d4d4; padding: 8px; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 13px; margin-top: 5px; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš« ë°˜ë³µëœ ì¸ì¦ì‹œë„ ì œí•œ ê¸°ëŠ¥ ë¶€ì¬</h1>
            <p>CWE-307: Improper Restriction of Excessive Authentication Attempts</p>
        </div>

        <div class="mode-tabs">
            <button class="mode-tab active" onclick="switchMode('java')">
                <div class="mode-title">Java ì‹œíì–´ ì½”ë”©</div>
                <div class="mode-desc">ì‹¤íŒ¨ íšŸìˆ˜ ì¹´ìš´íŠ¸</div>
            </button>
            <button class="mode-tab" onclick="switchMode('python')">
                <div class="mode-title">Python ì‹œíì–´ ì½”ë”©</div>
                <div class="mode-desc">ê³„ì • ì ê¸ˆ ë¡œì§</div>
            </button>
        </div>

        <!-- Java Mode -->
        <div id="java-mode" class="content-wrapper active">
            <div class="progress-indicator">
                <ul class="checklist" id="checkJava">
                    <li class="checklist-item">â¬œ ì§„ë‹¨ ì‹œì‘</li>
                    <li class="checklist-item">â¬œ ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€</li>
                    <li class="checklist-item">â¬œ ì„ê³„ì¹˜ ì´ˆê³¼ ì°¨ë‹¨</li>
                </ul>
            </div>
            <div class="main-content">
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">âœï¸ Java ì½”ë“œ ì—ë””í„°</span>
                        <span class="status-badge status-vulnerable" id="statusJava">ì·¨ì•½í•œ ì½”ë“œ</span>
                    </div>
                    <div class="code-editor">
                        <button class="edit-toggle-btn" onclick="toggleEdit('Java')">âœï¸ í¸ì§‘</button>
                        <div id="displayJava" class="code-display"><pre><code class="language-java">public boolean login(String user, String password) {
    if (checkCredentials(user, password)) {
        return true;
    } else {
        // [ì·¨ì•½ì ] ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ë‹¨ìˆœíˆ falseë§Œ ë°˜í™˜
        // ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©(Brute Force)ì— ì·¨ì•½í•¨
        return false;
    }
}</code></pre></div>
                        <textarea id="editJava" style="display:none;">public boolean login(String user, String password) {
    if (checkCredentials(user, password)) {
        return true;
    } else {
        // [ì·¨ì•½ì ] ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ë‹¨ìˆœíˆ falseë§Œ ë°˜í™˜
        // ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©(Brute Force)ì— ì·¨ì•½í•¨
        return false;
    }
}</textarea>
                    </div>
                    <div>
                        <button class="btn btn-analyze" onclick="analyze('Java')">ğŸ” ì§„ë‹¨í•˜ê¸°</button>
                        <button class="btn btn-validate" onclick="validate('Java')" id="btnValJava" disabled>âœ… ê²€ì¦í•˜ê¸°</button>
                        <button class="btn btn-hint" onclick="toggleHint('java')">ğŸ’¡ íŒíŠ¸</button>
                    </div>
                    <div id="feedbackJava" class="feedback"></div>
                    <div class="hint-panel" id="hintPanelJava">
                        <div class="info-title">ğŸ’¡ Java ìˆ˜ì • ê°€ì´ë“œ</div>
                        <div class="hint-step">
                            <strong>1. ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€</strong>
                            <p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ í•´ë‹¹ ê³„ì •ì˜ ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì¦ê°€ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.</p>
                            <div class="hint-code">increaseFailCount(user);</div>
                        </div>
                        <div class="hint-step">
                            <strong>2. ì„ê³„ì¹˜ ì´ˆê³¼ í™•ì¸</strong>
                            <p>ì‹¤íŒ¨ íšŸìˆ˜ê°€ ì¼ì • ê¸°ì¤€(ì˜ˆ: 5íšŒ)ì„ ë„˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
                            <div class="hint-code">if (getFailCount(user) > 5) { return false; }</div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-header"><span class="panel-title">ğŸ’¡ ê°€ì´ë“œ</span></div>
                    <p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ DBë‚˜ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê³ , ì¼ì • íšŸìˆ˜(ì˜ˆ: 5íšŒ)ë¥¼ ì´ˆê³¼í•˜ë©´ ê³„ì •ì„ ì ê·¸ê±°ë‚˜ ì§€ì—° ì‹œê°„ì„ ë‘ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>

        <!-- Python Mode -->
        <div id="python-mode" class="content-wrapper">
            <div class="progress-indicator">
                <ul class="checklist" id="checkPython">
                    <li class="checklist-item">â¬œ ì§„ë‹¨ ì‹œì‘</li>
                    <li class="checklist-item">â¬œ ì‹¤íŒ¨ íšŸìˆ˜ ì²´í¬</li>
                    <li class="checklist-item">â¬œ ê³„ì • ì ê¸ˆ ì²˜ë¦¬</li>
                </ul>
            </div>
            <div class="main-content">
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">ğŸ Python ì½”ë“œ ì—ë””í„°</span>
                        <span class="status-badge status-vulnerable" id="statusPython">ì·¨ì•½í•œ ì½”ë“œ</span>
                    </div>
                    <div class="code-editor">
                        <button class="edit-toggle-btn" onclick="toggleEdit('Python')">âœï¸ í¸ì§‘</button>
                        <div id="displayPython" class="code-display"><pre><code class="language-python">def login(user, password):
    if check_password(user, password):
        return "Success"
    else:
        # [ì·¨ì•½ì ] ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì œí•œí•˜ì§€ ì•ŠìŒ
        return "Fail"</code></pre></div>
                        <textarea id="editPython" style="display:none;">def login(user, password):
    if check_password(user, password):
        return "Success"
    else:
        # [ì·¨ì•½ì ] ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì œí•œí•˜ì§€ ì•ŠìŒ
        return "Fail"</textarea>
                    </div>
                    <div>
                        <button class="btn btn-analyze" onclick="analyze('Python')">ğŸ” ì§„ë‹¨í•˜ê¸°</button>
                        <button class="btn btn-validate" onclick="validate('Python')" id="btnValPython" disabled>âœ… ê²€ì¦í•˜ê¸°</button>
                        <button class="btn btn-hint" onclick="toggleHint('python')">ğŸ’¡ íŒíŠ¸</button>
                    </div>
                    <div id="feedbackPython" class="feedback"></div>
                    <div class="hint-panel" id="hintPanelPython">
                        <div class="info-title">ğŸ’¡ Python ìˆ˜ì • ê°€ì´ë“œ</div>
                        <div class="hint-step">
                            <strong>1. ì‹¤íŒ¨ íšŸìˆ˜ ì¹´ìš´íŠ¸</strong>
                            <p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì¹´ìš´íŠ¸ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.</p>
                            <div class="hint-code">fail_count += 1</div>
                        </div>
                        <div class="hint-step">
                            <strong>2. ì ê¸ˆ ì¡°ê±´ ì¶”ê°€</strong>
                            <p>ì‹¤íŒ¨ íšŸìˆ˜ê°€ ê¸°ì¤€ì¹˜ë¥¼ ì´ˆê³¼í•˜ë©´ ë¡œê·¸ì¸ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.</p>
                            <div class="hint-code">if fail_count > 5: return "Locked"</div>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-header"><span class="panel-title">ğŸ’¡ ê°€ì´ë“œ</span></div>
                    <p>ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ `fail_count`ë¥¼ ì¦ê°€ì‹œí‚¤ê³ , `if fail_count > 5:`ì™€ ê°™ì€ ì¡°ê±´ë¬¸ìœ¼ë¡œ ë¡œê·¸ì¸ì„ ì°¨ë‹¨í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
        function switchMode(mode) {
            document.querySelectorAll('.mode-tab').forEach(el => el.classList.remove('active'));
            event.target.closest('.mode-tab').classList.add('active');
            document.querySelectorAll('.content-wrapper').forEach(el => el.classList.remove('active'));
            document.getElementById(mode + '-mode').classList.add('active');
        }

        function toggleEdit(lang) {
            const display = document.getElementById('display' + lang);
            const edit = document.getElementById('edit' + lang);
            if (edit.style.display === 'none') {
                edit.style.display = 'block';
                edit.value = display.textContent;
                display.style.display = 'none';
            } else {
                edit.style.display = 'none';
                display.innerHTML = `<pre><code class="language-${lang.toLowerCase()}">${edit.value.replace(/</g, '&lt;')}</code></pre>`;
                display.style.display = 'block';
                Prism.highlightAll();
            }
        }

        function toggleHint(lang) {
            const panel = document.getElementById(lang === 'java' ? 'hintPanelJava' : 'hintPanelPython');
            if (panel.style.display === 'block') {
                panel.style.display = 'none';
                panel.classList.remove('active');
            } else {
                panel.style.display = 'block';
                panel.classList.add('active');
            }
        }

        function updateCheck(lang, idx, done) {
            const list = document.getElementById('check' + lang).children;
            if (done) {
                list[idx].classList.add('completed');
                list[idx].textContent = list[idx].textContent.replace('â¬œ', 'âœ…');
            } else {
                list[idx].classList.remove('completed');
                list[idx].textContent = list[idx].textContent.replace('âœ…', 'â¬œ');
            }
        }

        function analyze(lang) {
            updateCheck(lang, 0, true);
            document.getElementById('feedback' + lang).innerHTML = `<div class="feedback-item feedback-error">ğŸš¨ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©ì— ì·¨ì•½í•©ë‹ˆë‹¤.</div>`;
            document.getElementById('btnVal' + lang).disabled = false;
            document.getElementById('status' + lang).className = 'status-badge status-editing';
            document.getElementById('status' + lang).textContent = 'ìˆ˜ì • ì¤‘';
        }

        function validate(lang) {
            const code = document.getElementById('edit' + lang).value;
            // ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€ ë¡œì§ (increment, += 1) ë° ì œí•œ ë¡œì§ (>, >=, limit) í™•ì¸
            const hasIncrement = /increment|count\s*\+\+|count\s*\+=|fail_count\s*\+=/.test(code);
            const hasLimit = />\s*5|>\s*3|limit|LOCK/.test(code);

            updateCheck(lang, 1, hasIncrement);
            updateCheck(lang, 2, hasLimit);

            const fb = document.getElementById('feedback' + lang);
            if (hasIncrement && hasLimit) {
                fb.innerHTML = `<div class="feedback-item feedback-success">ğŸ‰ ì„±ê³µ! ê³„ì • ì ê¸ˆ ì •ì±…ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.</div>`;
                document.getElementById('status' + lang).className = 'status-badge status-secure';
                document.getElementById('status' + lang).textContent = 'ì•ˆì „í•œ ì½”ë“œ';
            } else {
                fb.innerHTML = `<div class="feedback-item feedback-error">âŒ ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì¹´ìš´íŠ¸í•˜ê³  ì¼ì • íšŸìˆ˜ ì´ˆê³¼ ì‹œ ì°¨ë‹¨í•˜ëŠ” ë¡œì§ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>`;
            }
        }
    </script>
</body>
</html>