<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ìº¡ìŠí™” ì‹¤ìŠµ</title>
<script src="config.js"></script>
<style>
/* ìŠ¤íƒ€ì¼ ìƒëµ (ìœ„ì™€ ë™ì¼) */
body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;}
.container { display: flex; gap: 20px; }
.box { flex: 1; border: 1px solid #ddd; padding: 20px; border-radius: 8px; }
.vuln { background-color: #ffe6e6; }
.secure { background-color: #e6fffa; }
button { padding: 8px 16px; cursor: pointer; margin-top: 10px; }
.code-section { margin-top: 40px; border-top: 2px solid #eee; padding-top: 20px; }
details { background: #f9f9f9; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ddd; }
summary { padding: 10px; cursor: pointer; font-weight: bold; }
pre { background: #333; color: #fff; padding: 15px; overflow-x: auto; }
</style>
</head>
<body>
<a href="index.html">â† ë©”ì¸ìœ¼ë¡œ</a>
<h1>ğŸ“¦ ìº¡ìŠí™” (Encapsulation)</h1>
<p>ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ìˆ¨ê¸°ê³  APIë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼ í—ˆìš©</p>

<div class="container">
    <div class="box vuln">
        <h2>ğŸš« ì·¨ì•½í•œ ëª¨ë“œ</h2>
        <p>ì™¸ë¶€ ì…ë ¥ê°’ìœ¼ë¡œ ê°ì²´ ì†ì„± ì „ì²´ ë®ì–´ì“°ê¸° í—ˆìš© (Mass Assignment)</p>
        <button onclick="runTest('vulnerableEncap', 'data', 'json')">ê³µê²©: Role ë³€ê²½ ì‹œë„</button>
    </div>
    <div class="box secure">
        <h2>âœ… ì•ˆì „í•œ ëª¨ë“œ</h2>
        <p>í—ˆìš©ëœ í•„ë“œë§Œ ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡ ì œí•œ</p>
        <button onclick="runTest('secureEncap', 'data', 'json')">ë°©ì–´: Role ë³€ê²½ ì‹œë„</button>
    </div>
</div>

<div class="code-section">
    <h2>ğŸ“š ì˜ˆì „ ì±… ë¶„ì„: Java & Python ê°€ì´ë“œ</h2>
    
    <details>
        <summary>â˜• Java: ì ‘ê·¼ ì œì–´ì</summary>
        <pre><code>// [ì·¨ì•½í•œ ì½”ë“œ] public í•„ë“œ ì‚¬ìš©
public class User {
    public int point; // ğŸš« ì™¸ë¶€ì—ì„œ user.point = -9999; ì¡°ì‘ ê°€ëŠ¥
}

// [ì•ˆì „í•œ ì½”ë“œ] private í•„ë“œ ë° Getter/Setter ì‚¬ìš©
public class User {
    private int point;
    public void setPoint(int p) {
        if (p >= 0) this.point = p; // âœ… ìœ íš¨ì„± ê²€ì¦ ê°€ëŠ¥
    }
}</code></pre>
    </details>

    <details>
        <summary>ğŸ Python: ì†ì„± ë³´í˜¸</summary>
        <pre><code># [ì·¨ì•½í•œ ì½”ë“œ] ëª¨ë“  ì†ì„± ê³µê°œ
class Account:
    def __init__(self):
        self.balance = 0 # ğŸš« acc.balance = 1000000 ë°”ë¡œ ìˆ˜ì • ê°€ëŠ¥

# [ì•ˆì „í•œ ì½”ë“œ] ë„¤ì´ë° ì»¨ë²¤ì…˜(_) ë° Property ì‚¬ìš©
class Account:
    def __init__(self):
        self._balance = 0
    
    @property
    def balance(self):
        return self._balance
        
    @balance.setter
    def balance(self, value):
        if value >= 0: self._balance = value</code></pre>
    </details>
</div>

<script>
function runTest(funcName, paramName, type) {
    // ê³µê²© ë°ì´í„°: ê¶Œí•œì„ adminìœ¼ë¡œ ìƒìŠ¹ ì‹œë„
    const payload = JSON.stringify({ name: "Hacker", role: "super-admin" });
    const encoded = encodeURIComponent(payload);
    window.open(`${BASE_URL}/${funcName}?${paramName}=${encoded}`, '_blank');
}
</script>
</body>
</html>