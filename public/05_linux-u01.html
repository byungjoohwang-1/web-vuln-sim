<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>U-01 root ê³„ì • ì›ê²© ì ‘ì† ì œí•œ - ì‹¤ìŠµ ì‹œë®¬ë ˆì´í„°</title>
    <!-- Prism for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', 'Malgun Gothic', sans-serif; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 1600px; margin: 0 auto; }
        
        /* í—¤ë” ìŠ¤íƒ€ì¼ - UNIX í…Œë§ˆ (ì§„í•œ ë„¤ì´ë¹„/ë¸”ë£¨) */
        .header { background: white; padding: 30px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center; border-bottom: 5px solid #0d6efd; }
        .header h1 { color: #0d6efd; font-size: 32px; margin-bottom: 10px; font-weight: 800; }
        .header p { color: #666; font-size: 16px; }
        
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .mode-tabs { display: flex; gap: 15px; margin-bottom: 20px; }
        .mode-tab { flex: 1; padding: 20px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 12px; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.05); text-align: left; position: relative; overflow: hidden; }
        .mode-tab:hover { transform: translateY(-3px); }
        .mode-tab.active { background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%); color: white; }
        .mode-icon { font-size: 32px; margin-bottom: 10px; }
        .mode-title { font-size: 18px; font-weight: bold; margin-bottom: 5px; }
        .mode-desc { font-size: 13px; opacity: 0.8; }
        
        /* ì»¨í…ì¸  ì˜ì—­ */
        .content-wrapper { display: none; }
        .content-wrapper.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ì²´í¬ë¦¬ìŠ¤íŠ¸ */
        .progress-indicator { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .progress-title { font-size: 16px; font-weight: bold; margin-bottom: 15px; color: #2c3e50; }
        .checklist { list-style: none; padding: 0; display: flex; gap: 15px; flex-wrap: wrap; }
        .checklist-item { padding: 8px 15px; background: #f8f9fa; border-radius: 20px; display: flex; align-items: center; gap: 8px; font-size: 14px; border: 1px solid #e9ecef; transition: all 0.3s; }
        .checklist-item.completed { background: #d4edda; border-color: #c3e6cb; color: #155724; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        /* ë©”ì¸ íŒ¨ë„ ê·¸ë¦¬ë“œ */
        .main-content { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; margin-bottom: 20px; }
        .panel { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); display: flex; flex-direction: column; height: 100%; }
        
        .panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 3px solid #f0f0f0; }
        .panel-title { font-size: 20px; font-weight: bold; color: #2c3e50; display: flex; align-items: center; gap: 10px; }
        
        .status-badge { padding: 6px 16px; border-radius: 20px; font-size: 13px; font-weight: bold; }
        .status-vulnerable { background: #dc3545; color: white; }
        .status-secure { background: #198754; color: white; }
        .status-editing { background: #ffc107; color: #000; }

        /* í„°ë¯¸ë„ ì—ë””í„° ìŠ¤íƒ€ì¼ */
        .code-editor { background: #2d2d2d; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; flex-grow: 1; min-height: 500px; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }
        .editor-toolbar { background: #404040; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #505050; }
        .toolbar-title { color: #fff; font-size: 13px; font-weight: bold; font-family: 'Consolas', monospace; }
        .toolbar-hint { color: #ffc107; font-size: 12px; margin-left: 15px; flex: 1; }
        
        .edit-toggle-btn { background: #0d6efd; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: bold; transition: all 0.3s; }
        .edit-toggle-btn:hover { background: #0b5ed7; }
        .edit-toggle-btn.editing { background: #198754; }

        .code-display { background: #2d2d2d; padding: 15px; overflow: auto; flex-grow: 1; color: #f8f8f2; }
        .code-display pre { margin: 0; font-family: 'Consolas', 'Monaco', monospace; font-size: 14px; line-height: 1.6; }
        
        .code-textarea { width: 100%; height: 100%; background: #2d2d2d; color: #f8f8f2; border: none; padding: 15px; font-family: 'Consolas', 'Monaco', monospace; font-size: 14px; line-height: 1.6; resize: none; outline: none; flex-grow: 1; display: none; }
        .code-textarea:focus { outline: none; background: #333; }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .control-panel { display: flex; gap: 15px; margin-top: 20px; }
        .btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .btn-analyze { background: #dc3545; color: white; }
        .btn-validate { background: #198754; color: white; }
        .btn-hint { background: #ffc107; color: #000; }
        .btn-reset { background: #6c757d; color: white; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        /* í”¼ë“œë°± ë° íŒíŠ¸ */
        .feedback { margin-top: 20px; }
        .feedback-item { padding: 15px; margin-bottom: 10px; border-radius: 8px; animation: slideIn 0.3s ease-out; }
        .feedback-error { background: #fff5f5; border-left: 4px solid #dc3545; color: #842029; }
        .feedback-success { background: #d4edda; border-left: 4px solid #198754; color: #0f5132; }
        .feedback-warning { background: #fff3cd; border-left: 4px solid #ffc107; color: #664d03; }
        
        .hint-panel { background: #fff8dc; border: 2px solid #ffc107; border-radius: 10px; padding: 20px; margin-top: 20px; display: none; }
        .hint-panel.active { display: block; animation: slideIn 0.3s ease-out; }
        .hint-step { background: white; padding: 12px; margin-bottom: 10px; border-radius: 6px; border-left: 3px solid #ffc107; }
        .hint-code { background: #2d2d2d; color: #f8f8f2; padding: 8px; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 13px; margin-top: 5px; border: 1px solid #444; }

        /* ì •ë³´ ì„¹ì…˜ */
        .info-section { margin-bottom: 20px; }
        .info-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #0d6efd; display: flex; align-items: center; gap: 8px; }
        .info-content { color: #555; line-height: 1.6; font-size: 15px; }
        
        .kisa-badge { display: inline-block; padding: 4px 8px; background: #6c757d; color: white; border-radius: 4px; font-size: 12px; margin-bottom: 5px; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        @media (max-width: 1200px) { .main-content { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <span class="kisa-badge">ì£¼ìš”ì •ë³´í†µì‹ ê¸°ë°˜ì‹œì„¤ ê¸°ìˆ ì  ì·¨ì•½ì  ê°€ì´ë“œ</span>
            <h1>ğŸ›¡ï¸ U-01 root ê³„ì • ì›ê²© ì ‘ì† ì œí•œ</h1>
            <p>ì‹œìŠ¤í…œ ê´€ë¦¬ì ê³„ì •(root)ì˜ ì§ì ‘ì ì¸ ì›ê²© ì ‘ì†ì„ ì°¨ë‹¨í•˜ì—¬ ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© ë“±ì„ ë°©ì–´í•©ë‹ˆë‹¤.</p>
        </div>

        <!-- íƒ­ ë©”ë‰´ (Telnet vs SSH) -->
        <div class="mode-tabs">
            <button class="mode-tab active" onclick="switchMode('telnet')">
                <div class="mode-icon"><i class="fa-solid fa-tty"></i></div>
                <div class="mode-title">Telnet ì„¤ì •</div>
                <div class="mode-desc">/etc/securetty íŒŒì¼ ì ê²€</div>
            </button>
            <button class="mode-tab" onclick="switchMode('ssh')">
                <div class="mode-icon"><i class="fa-solid fa-server"></i></div>
                <div class="mode-title">SSH ì„¤ì •</div>
                <div class="mode-desc">/etc/ssh/sshd_config íŒŒì¼ ì ê²€</div>
            </button>
        </div>

        <!-- =========================
             1. Telnet ëª¨ë“œ (/etc/securetty)
             ========================= -->
        <div id="telnet-mode" class="content-wrapper active">
            <div class="progress-indicator">
                <div class="progress-title">âœ… ì ê²€ ì§„í–‰ë„</div>
                <ul class="checklist" id="progressChecklistTelnet">
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> ì„¤ì • íŒŒì¼ í™•ì¸</li>
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> ì·¨ì•½ì (pts) ì‹ë³„</li>
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> ë³´ì•ˆ ì¡°ì¹˜ ì™„ë£Œ</li>
                </ul>
            </div>

            <div class="main-content">
                <!-- ì™¼ìª½: ì—ë””í„° íŒ¨ë„ -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title"><i class="fa-regular fa-file-code"></i> ì„¤ì • íŒŒì¼ í¸ì§‘ê¸°</span>
                        <span class="status-badge status-vulnerable" id="statusTelnet">ì·¨ì•½í•¨</span>
                    </div>

                    <div class="code-editor">
                        <div class="editor-toolbar">
                            <span class="toolbar-title">/etc/securetty</span>
                            <span class="toolbar-hint">ğŸ’¡ pts/0 ~ pts/x ê°€ìƒ í„°ë¯¸ë„ ì„¤ì • ì œê±° í•„ìš”</span>
                            <button class="edit-toggle-btn" id="editBtnTelnet" onclick="toggleEdit('telnet')">âœï¸ í¸ì§‘ (vi)</button>
                        </div>
                        <div class="code-display">
                            <pre><code class="language-bash" id="codeDisplayTelnet"># /etc/securetty: list of terminals on which root is allowed to login.
console
tty1
tty2
tty3
# [ì·¨ì•½] ì›ê²© ì ‘ì†ì„ ìœ„í•œ ê°€ìƒ í„°ë¯¸ë„ í—ˆìš©
pts/0
pts/1
pts/2
pts/3
pts/4</code></pre>
                        </div>
                        <textarea class="code-textarea" id="editorTelnet" spellcheck="false"># /etc/securetty: list of terminals on which root is allowed to login.
console
tty1
tty2
tty3
# [ì·¨ì•½] ì›ê²© ì ‘ì†ì„ ìœ„í•œ ê°€ìƒ í„°ë¯¸ë„ í—ˆìš©
pts/0
pts/1
pts/2
pts/3
pts/4</textarea>
                    </div>

                    <div class="control-panel">
                        <button class="btn btn-analyze" onclick="analyzeTelnet()">ğŸ” ì§„ë‹¨í•˜ê¸°</button>
                        <button class="btn btn-validate" onclick="validateTelnet()" id="validateBtnTelnet" disabled>âœ… ì´í–‰ê²€ì¦</button>
                        <button class="btn btn-hint" onclick="toggleHint('telnet')">ğŸ’¡ ê°€ì´ë“œ</button>
                        <button class="btn btn-reset" onclick="resetTelnet()">ğŸ”„ ì´ˆê¸°í™”</button>
                    </div>

                    <div class="feedback" id="feedbackTelnet"></div>

                    <div class="hint-panel" id="hintPanelTelnet">
                        <div class="info-title">ğŸ’¡ KISA ì¡°ì¹˜ ê°€ì´ë“œ</div>
                        <div class="hint-step">
                            <strong>1. pts(ê°€ìƒ í„°ë¯¸ë„) ì œê±°</strong>
                            <p>/etc/securetty íŒŒì¼ ë‚´ì—ì„œ <code>pts/0</code>, <code>pts/1</code> ë“± ptsë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  í„°ë¯¸ë„ ë¼ì¸ì„ ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„(#) ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
                            <div class="hint-code">
# pts/0  <-- ì£¼ì„ ì²˜ë¦¬ ë˜ëŠ” ì‚­ì œ
# pts/1
                            </div>
                        </div>
                        <div class="hint-step">
                            <strong>2. consoleë§Œ í—ˆìš©</strong>
                            <p>ë¬¼ë¦¬ì  ì½˜ì†”(console, tty) ì ‘ì†ë§Œ í—ˆìš©í•˜ì—¬ ì›ê²©ì—ì„œì˜ ì§ì ‘ root ë¡œê·¸ì¸ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì„¤ëª… íŒ¨ë„ -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">ğŸ“Š ì·¨ì•½ì  ìƒì„¸ ë¶„ì„</span>
                    </div>
                    <div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-bullseye"></i> ì ê²€ ëª©ì </div>
                            <div class="info-content">
                                ê´€ë¦¬ì ê³„ì •(root)ì´ ì›ê²©ì—ì„œ Telnet ë“±ì„ í†µí•´ ì§ì ‘ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ë„ë¡ ì„¤ì •í•˜ì—¬, ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²©(Brute Force Attack) ë° íŒ¨ìŠ¤ì›Œë“œ ì¶”ì¸¡ ê³µê²©ì— ì˜í•œ ì‹œìŠ¤í…œ ì¥ì•…ì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
                            </div>
                        </div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-triangle-exclamation"></i> ìœ„í—˜ì„±</div>
                            <div class="info-content">
                                <p style="color: #dc3545; font-weight: bold;">[ìƒ] ë§¤ìš° ìœ„í—˜</p>
                                <p>root ê³„ì •ì€ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ë¯€ë¡œ, ì›ê²©ì—ì„œ ì§ì ‘ ì ‘ì†ì´ í—ˆìš©ë  ê²½ìš° ê³µê²©ìê°€ íŒ¨ìŠ¤ì›Œë“œë§Œ ì•Œì•„ë‚´ë©´ ì¦‰ì‹œ ì‹œìŠ¤í…œì„ ì¥ì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-check-double"></i> íŒë‹¨ ê¸°ì¤€</div>
                            <div class="info-content">
                                <ul style="list-style-type: disc; margin-left: 20px;">
                                    <li><strong>ì–‘í˜¸:</strong> <code>/etc/securetty</code> íŒŒì¼ì— pts(ê°€ìƒ í„°ë¯¸ë„) ê´€ë ¨ ì„¤ì •ì´ ì—†ëŠ” ê²½ìš°</li>
                                    <li><strong>ì·¨ì•½:</strong> <code>/etc/securetty</code> íŒŒì¼ì— pts/0, pts/1 ë“± ê°€ìƒ í„°ë¯¸ë„ ì„¤ì •ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- =========================
             2. SSH ëª¨ë“œ (/etc/ssh/sshd_config)
             ========================= -->
        <div id="ssh-mode" class="content-wrapper">
            <div class="progress-indicator">
                <div class="progress-title">âœ… ì ê²€ ì§„í–‰ë„</div>
                <ul class="checklist" id="progressChecklistSSH">
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> ì„¤ì • íŒŒì¼ í™•ì¸</li>
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> PermitRootLogin í™•ì¸</li>
                    <li class="checklist-item"><span class="checklist-icon">â¬œ</span> ë³´ì•ˆ ì¡°ì¹˜ ì™„ë£Œ</li>
                </ul>
            </div>

            <div class="main-content">
                <!-- ì™¼ìª½: ì—ë””í„° íŒ¨ë„ -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title"><i class="fa-regular fa-file-code"></i> ì„¤ì • íŒŒì¼ í¸ì§‘ê¸°</span>
                        <span class="status-badge status-vulnerable" id="statusSSH">ì·¨ì•½í•¨</span>
                    </div>

                    <div class="code-editor">
                        <div class="editor-toolbar">
                            <span class="toolbar-title">/etc/ssh/sshd_config</span>
                            <span class="toolbar-hint">ğŸ’¡ PermitRootLogin ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.</span>
                            <button class="edit-toggle-btn" id="editBtnSSH" onclick="toggleEdit('ssh')">âœï¸ í¸ì§‘ (vi)</button>
                        </div>
                        <div class="code-display">
                            <pre><code class="language-bash" id="codeDisplaySSH"># $OpenBSD: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp $

Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::

# Authentication:
LoginGraceTime 2m

# [ì·¨ì•½] rootì˜ ì›ê²© ì ‘ì†ì„ í—ˆìš©í•˜ê³  ìˆìŒ
PermitRootLogin yes

#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10</code></pre>
                        </div>
                        <textarea class="code-textarea" id="editorSSH" spellcheck="false"># $OpenBSD: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp $

Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::

# Authentication:
LoginGraceTime 2m

# [ì·¨ì•½] rootì˜ ì›ê²© ì ‘ì†ì„ í—ˆìš©í•˜ê³  ìˆìŒ
PermitRootLogin yes

#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10</textarea>
                    </div>

                    <div class="control-panel">
                        <button class="btn btn-analyze" onclick="analyzeSSH()">ğŸ” ì§„ë‹¨í•˜ê¸°</button>
                        <button class="btn btn-validate" onclick="validateSSH()" id="validateBtnSSH" disabled>âœ… ì´í–‰ê²€ì¦</button>
                        <button class="btn btn-hint" onclick="toggleHint('ssh')">ğŸ’¡ ê°€ì´ë“œ</button>
                        <button class="btn btn-reset" onclick="resetSSH()">ğŸ”„ ì´ˆê¸°í™”</button>
                    </div>

                    <div class="feedback" id="feedbackSSH"></div>

                    <div class="hint-panel" id="hintPanelSSH">
                        <div class="info-title">ğŸ’¡ KISA ì¡°ì¹˜ ê°€ì´ë“œ</div>
                        <div class="hint-step">
                            <strong>1. PermitRootLogin ì„¤ì • ë³€ê²½</strong>
                            <p>/etc/ssh/sshd_config íŒŒì¼ì—ì„œ <code>PermitRootLogin</code> í•­ëª©ì˜ ê°’ì„ <code>no</code>ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.</p>
                            <div class="hint-code">
PermitRootLogin no
                            </div>
                        </div>
                        <div class="hint-step">
                            <strong>2. ì„œë¹„ìŠ¤ ì¬ì‹œì‘ (ì°¸ê³ )</strong>
                            <p>ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì„¤ì • ë³€ê²½ í›„ ë°˜ë“œì‹œ SSH ë°ëª¬ì„ ì¬ì‹œì‘í•´ì•¼ ì ìš©ë©ë‹ˆë‹¤.<br>
                            <code># systemctl restart sshd</code></p>
                        </div>
                    </div>
                </div>

                <!-- ì˜¤ë¥¸ìª½: ì„¤ëª… íŒ¨ë„ -->
                <div class="panel">
                    <div class="panel-header">
                        <span class="panel-title">ğŸ“Š ì·¨ì•½ì  ìƒì„¸ ë¶„ì„</span>
                    </div>
                    <div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-bullseye"></i> ì ê²€ ëª©ì </div>
                            <div class="info-content">
                                SSH í”„ë¡œí† ì½œì„ ì´ìš©í•œ ì›ê²© ì ‘ì† ì‹œ root ê³„ì • ë¡œê·¸ì¸ì„ ì°¨ë‹¨í•˜ê³ , ì¼ë°˜ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ <code>su</code> ë˜ëŠ” <code>sudo</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ ê´€ë¦¬ì ê¶Œí•œì„ íšë“í•˜ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.
                            </div>
                        </div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-triangle-exclamation"></i> ë³´ì•ˆ ìœ„í˜‘</div>
                            <div class="info-content">
                                <p style="color: #dc3545;"><strong>ë¬´ì°¨ë³„ ëŒ€ì… ê³µê²© (Brute Force)</strong></p>
                                <p>ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì— ì¡´ì¬í•˜ëŠ” 'root' ì•„ì´ë””ëŠ” ê³µê²©ìì˜ 1ìˆœìœ„ íƒ€ê²Ÿì…ë‹ˆë‹¤. ì›ê²© ì ‘ì†ì´ í—ˆìš©ë˜ì–´ ìˆë‹¤ë©´ ì•„ì´ë””ë¥¼ ì•Œì•„ë‚¼ í•„ìš” ì—†ì´ íŒ¨ìŠ¤ì›Œë“œ ëŒ€ì…ë§Œìœ¼ë¡œ í•´í‚¹ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                        <div class="info-section">
                            <div class="info-title"><i class="fa-solid fa-check-double"></i> íŒë‹¨ ê¸°ì¤€</div>
                            <div class="info-content">
                                <ul style="list-style-type: disc; margin-left: 20px;">
                                    <li><strong>ì–‘í˜¸:</strong> <code>PermitRootLogin no</code> ì„¤ì •ì´ ë˜ì–´ ìˆëŠ” ê²½ìš°</li>
                                    <li><strong>ì·¨ì•½:</strong> <code>PermitRootLogin yes</code> ë¡œ ì„¤ì •ë˜ì–´ ìˆê±°ë‚˜, í•´ë‹¹ ì„¤ì •ì´ ì£¼ì„(#) ì²˜ë¦¬ë˜ì–´ ê¸°ë³¸ê°’(yes)ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²½ìš°</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    
    <script>
        // === ê³µí†µ ìœ í‹¸ë¦¬í‹° ===
        function switchMode(mode) {
            document.querySelectorAll('.mode-tab').forEach(tab => tab.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            document.querySelectorAll('.content-wrapper').forEach(w => w.classList.remove('active'));
            document.getElementById(mode + '-mode').classList.add('active');
        }

        function toggleHint(mode) {
            const panelId = mode === 'telnet' ? 'hintPanelTelnet' : 'hintPanelSSH';
            document.getElementById(panelId).classList.toggle('active');
        }

        function updateChecklist(listId, index, isCompleted) {
            const list = document.getElementById(listId);
            const items = list.getElementsByTagName('li');
            if (items[index]) {
                const icon = items[index].querySelector('.checklist-icon');
                if (isCompleted) {
                    items[index].classList.add('completed');
                    icon.textContent = 'âœ…';
                } else {
                    items[index].classList.remove('completed');
                    icon.textContent = 'â¬œ';
                }
            }
        }

        // === 1. Telnet Logic (/etc/securetty) ===
        let isEditingTelnet = false;
        
        function toggleEdit(mode) {
            const isTelnet = mode === 'telnet';
            const suffix = isTelnet ? 'Telnet' : 'SSH';
            
            const displayEl = document.querySelector(`#codeDisplay${suffix}`).parentElement; // pre tag
            const editorEl = document.getElementById(`editor${suffix}`);
            const btn = document.getElementById(`editBtn${suffix}`);
            const codeEl = document.getElementById(`codeDisplay${suffix}`);

            const isEditing = isTelnet ? isEditingTelnet : isEditingSSH;

            if (!isEditing) {
                // í¸ì§‘ ëª¨ë“œ ì§„ì…
                displayEl.style.display = 'none';
                editorEl.style.display = 'block';
                editorEl.value = codeEl.textContent; // í˜„ì¬ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
                editorEl.focus();
                btn.innerHTML = '<i class="fa-solid fa-save"></i> ì €ì¥ (:wq)';
                btn.classList.add('editing');
            } else {
                // ì €ì¥ ë° ë³´ê¸° ëª¨ë“œ ì „í™˜
                displayEl.style.display = 'block';
                editorEl.style.display = 'none';
                codeEl.textContent = editorEl.value; // ë³€ê²½ëœ í…ìŠ¤íŠ¸ ë°˜ì˜
                if(window.Prism) Prism.highlightElement(codeEl);
                btn.innerHTML = 'âœï¸ í¸ì§‘ (vi)';
                btn.classList.remove('editing');
            }

            if(isTelnet) isEditingTelnet = !isEditingTelnet;
            else isEditingSSH = !isEditingSSH;
        }

        function analyzeTelnet() {
            updateChecklist('progressChecklistTelnet', 0, true);
            const code = document.getElementById('editorTelnet').value;
            
            // ptsê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            if (code.includes('pts/')) {
                updateChecklist('progressChecklistTelnet', 1, true); // ì·¨ì•½ì  ì‹ë³„
                document.getElementById('feedbackTelnet').innerHTML = 
                    `<div class="feedback-item feedback-error">
                        <strong>ğŸš¨ ì·¨ì•½ì  ë°œê²¬ (VULNERABLE)</strong>
                        <p>/etc/securetty íŒŒì¼ì— <code>pts/x</code>(ê°€ìƒ í„°ë¯¸ë„) ì„¤ì •ì´ ì¡´ì¬í•˜ì—¬ rootì˜ ì›ê²© ì ‘ì†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                     </div>`;
                document.getElementById('validateBtnTelnet').disabled = false;
                setStatus('Telnet', 'vulnerable');
            } else {
                // ì´ë¯¸ ì•ˆì „í•œ ê²½ìš°
                 document.getElementById('feedbackTelnet').innerHTML = 
                    `<div class="feedback-item feedback-success">
                        <strong>âœ… ì–‘í˜¸ (GOOD)</strong>
                        <p>í˜„ì¬ pts ì„¤ì •ì´ ì—†ì–´ root ì›ê²© ì ‘ì†ì´ ì œí•œëœ ìƒíƒœì…ë‹ˆë‹¤.</p>
                     </div>`;
            }
        }

        function validateTelnet() {
            const code = document.getElementById('editorTelnet').value;
            // ìœ íš¨ì„± ê²€ì‚¬: pts/ ë¬¸ìì—´ì´ ì—†ê±°ë‚˜ ì£¼ì„ì²˜ë¦¬ ë˜ì–´ì•¼ í•¨ (ì—¬ê¸°ì„  ë‹¨ìˆœ ì œê±° í™•ì¸)
            const lines = code.split('\n');
            let hasVulnerablePts = false;

            for(let line of lines) {
                line = line.trim();
                // ì£¼ì„ì´ ì•„ë‹Œë° ptsë¡œ ì‹œì‘í•˜ë©´ ì·¨ì•½
                if(!line.startsWith('#') && line.startsWith('pts/')) {
                    hasVulnerablePts = true;
                    break;
                }
            }

            if (!hasVulnerablePts) {
                updateChecklist('progressChecklistTelnet', 2, true);
                document.getElementById('feedbackTelnet').innerHTML = 
                    `<div class="feedback-item feedback-success">
                        <strong>ğŸ‰ ì¡°ì¹˜ ì™„ë£Œ (SECURE)</strong>
                        <p>ê°€ìƒ í„°ë¯¸ë„(pts) ì ‘ì† ì œí•œ ì„¤ì •ì´ ì˜¬ë°”ë¥´ê²Œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                     </div>`;
                setStatus('Telnet', 'secure');
            } else {
                updateChecklist('progressChecklistTelnet', 2, false);
                document.getElementById('feedbackTelnet').innerHTML = 
                    `<div class="feedback-item feedback-warning">
                        <strong>âš ï¸ ì¡°ì¹˜ ë¯¸í¡</strong>
                        <p>ì—¬ì „íˆ <code>pts/</code> ì„¤ì •ì´ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì‚­ì œí•˜ê±°ë‚˜ ì£¼ì„(#) ì²˜ë¦¬í•˜ì„¸ìš”.</p>
                     </div>`;
                setStatus('Telnet', 'editing');
            }
        }

        function resetTelnet() {
            const initialCode = `# /etc/securetty: list of terminals on which root is allowed to login.
console
tty1
tty2
tty3
# [ì·¨ì•½] ì›ê²© ì ‘ì†ì„ ìœ„í•œ ê°€ìƒ í„°ë¯¸ë„ í—ˆìš©
pts/0
pts/1
pts/2
pts/3
pts/4`;
            document.getElementById('editorTelnet').value = initialCode;
            document.getElementById('codeDisplayTelnet').textContent = initialCode;
            if(window.Prism) Prism.highlightElement(document.getElementById('codeDisplayTelnet'));
            
            document.getElementById('feedbackTelnet').innerHTML = '';
            document.getElementById('validateBtnTelnet').disabled = true;
            setStatus('Telnet', 'vulnerable');
            
            updateChecklist('progressChecklistTelnet', 0, false);
            updateChecklist('progressChecklistTelnet', 1, false);
            updateChecklist('progressChecklistTelnet', 2, false);
        }

        // === 2. SSH Logic (/etc/ssh/sshd_config) ===
        let isEditingSSH = false;

        function analyzeSSH() {
            updateChecklist('progressChecklistSSH', 0, true);
            const code = document.getElementById('editorSSH').value;
            
            if (code.includes('PermitRootLogin yes')) {
                updateChecklist('progressChecklistSSH', 1, true);
                document.getElementById('feedbackSSH').innerHTML = 
                    `<div class="feedback-item feedback-error">
                        <strong>ğŸš¨ ì·¨ì•½ì  ë°œê²¬ (VULNERABLE)</strong>
                        <p><code>PermitRootLogin yes</code> ì„¤ì •ìœ¼ë¡œ ì¸í•´ SSHë¥¼ í†µí•œ root ì§ì ‘ ë¡œê·¸ì¸ì´ í—ˆìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                     </div>`;
                document.getElementById('validateBtnSSH').disabled = false;
                setStatus('SSH', 'vulnerable');
            }
        }

        function validateSSH() {
            const code = document.getElementById('editorSSH').value;
            // PermitRootLogin no ì¸ì§€ í™•ì¸ (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ ë“± ì •êµí•¨ë³´ë‹¤ í•™ìŠµ ëª©ì )
            
            if (code.includes('PermitRootLogin no') && !code.includes('PermitRootLogin yes')) {
                updateChecklist('progressChecklistSSH', 2, true);
                document.getElementById('feedbackSSH').innerHTML = 
                    `<div class="feedback-item feedback-success">
                        <strong>ğŸ‰ ì¡°ì¹˜ ì™„ë£Œ (SECURE)</strong>
                        <p>SSH root ì§ì ‘ ë¡œê·¸ì¸ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. (PermitRootLogin no)</p>
                     </div>`;
                setStatus('SSH', 'secure');
            } else {
                updateChecklist('progressChecklistSSH', 2, false);
                document.getElementById('feedbackSSH').innerHTML = 
                    `<div class="feedback-item feedback-warning">
                        <strong>âš ï¸ ì¡°ì¹˜ ë¯¸í¡</strong>
                        <p><code>PermitRootLogin no</code>ë¡œ ì„¤ì •ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                     </div>`;
                 setStatus('SSH', 'editing');
            }
        }

        function resetSSH() {
            const initialCode = `# $OpenBSD: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp $

Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::

# Authentication:
LoginGraceTime 2m

# [ì·¨ì•½] rootì˜ ì›ê²© ì ‘ì†ì„ í—ˆìš©í•˜ê³  ìˆìŒ
PermitRootLogin yes

#StrictModes yes
#MaxAuthTries 6
#MaxSessions 10`;
            document.getElementById('editorSSH').value = initialCode;
            document.getElementById('codeDisplaySSH').textContent = initialCode;
            if(window.Prism) Prism.highlightElement(document.getElementById('codeDisplaySSH'));

            document.getElementById('feedbackSSH').innerHTML = '';
            document.getElementById('validateBtnSSH').disabled = true;
            setStatus('SSH', 'vulnerable');
            
            updateChecklist('progressChecklistSSH', 0, false);
            updateChecklist('progressChecklistSSH', 1, false);
            updateChecklist('progressChecklistSSH', 2, false);
        }

        function setStatus(suffix, status) {
            const el = document.getElementById(`status${suffix}`);
            if(status === 'vulnerable') {
                el.textContent = 'ì·¨ì•½í•¨';
                el.className = 'status-badge status-vulnerable';
            } else if (status === 'secure') {
                el.textContent = 'ì–‘í˜¸';
                el.className = 'status-badge status-secure';
            } else {
                el.textContent = 'ìˆ˜ì • ì¤‘';
                el.className = 'status-badge status-editing';
            }
        }
    </script>
</body>
</html>